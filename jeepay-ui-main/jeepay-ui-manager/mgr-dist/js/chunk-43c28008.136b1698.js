(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43c28008","chunk-2d213e8c"],{"18dc":function(e,t,a){},"30b1":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=this,a=t.$createElement,s=t._self._c||a;return s("page-header-wrapper",[s("a-card",[s("div",{staticClass:"table-page-search-wrapper"},[s("a-form",{staticClass:"table-head-ground",attrs:{layout:"inline"}},[s("div",{staticClass:"table-layer"},[s("jeepay-text-up",{attrs:{placeholder:"通道名称",msg:t.searchData.payPassageName},model:{value:t.searchData.payPassageName,callback:function(e){t.$set(t.searchData,"payPassageName",e)},expression:"searchData.payPassageName"}}),s("jeepay-text-up",{attrs:{placeholder:"通道ID",msg:t.searchData.payPassageId},model:{value:t.searchData.payPassageId,callback:function(e){t.$set(t.searchData,"payPassageId",e)},expression:"searchData.payPassageId"}}),s("a-form-model-item",{staticClass:"table-head-layout",attrs:{label:""}},[s("a-select",{attrs:{allowClear:!0,placeholder:"对应产品","show-search":"","option-filter-prop":"children"},model:{value:t.searchData.productId,callback:function(e){t.$set(t.searchData,"productId",e)},expression:"searchData.productId"}},t._l(t.productList,(function(e){return s("a-select-option",{key:e.productId,attrs:{value:e.productId}},[t._v(" "+t._s(e.productName+" [ ID: "+e.productId+" ]")+" ")])})),1)],1),s("a-form-item",{staticClass:"table-head-layout",attrs:{label:""}},[s("a-select",{attrs:{placeholder:"状态","default-value":""},model:{value:t.searchData.state,callback:function(e){t.$set(t.searchData,"state",e)},expression:"searchData.state"}},[s("a-select-option",{attrs:{value:""}},[t._v("全部")]),s("a-select-option",{attrs:{value:"0"}},[t._v("禁用")]),s("a-select-option",{attrs:{value:"1"}},[t._v("启用")])],1)],1),s("span",{staticClass:"table-page-search-submitButtons",staticStyle:{"flex-grow":"0","flex-shrink":"0"}},[s("a-button",{attrs:{type:"primary",icon:"search",loading:t.btnLoading},on:{click:t.queryFunc}},[t._v("查询")]),s("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"reload"},on:{click:function(){return e.searchData={}}}},[t._v("重置")])],1)],1)]),s("div",[t.$access("ENT_MCH_APP_ADD")?s("a-button",{staticClass:"mg-b-30",attrs:{type:"primary",icon:"plus"},on:{click:t.addFunc}},[t._v("新建")]):t._e(),t.$access("ENT_MCH_APP_EDIT")?s("a-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"danger",icon:"minus-circle"},on:{click:t.setAllBalanceZero}},[t._v("余额清空")]):t._e(),t.$access("ENT_MCH_APP_EDIT")?s("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"danger",icon:"setting"},on:{click:t.setAutoClean}},[t._v("通道自动日切设置")]):t._e(),t.$access("ENT_MCH_APP_EDIT")?s("a-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"danger",icon:"exclamation-circle"},on:{click:t.setCloseAll}},[t._v("关闭全部通道")]):t._e(),t.$access("ENT_MCH_APP_EDIT")?s("a-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"primary",icon:"issues-close"},on:{click:t.setOpenRecently}},[t._v("打开最近启用通道")]):t._e()],1)],1),s("div",{staticStyle:{"background-color":"#fafafa","padding-left":"15px","padding-top":"10px","padding-bottom":"10px","border-bottom":"1px solid #e8e8e8"}},[s("a-row",[s("a-col",{staticClass:"stat-col bg-color-1",attrs:{span:4}},[s("span",{staticClass:"title"},[t._v("通道总数")]),s("b",{staticStyle:{color:"#DB4B4B"}},[t._v(t._s(this.totalPassageInfo.passageNum))])]),s("a-col",{staticClass:"stat-col bg-color-2",attrs:{span:4,offset:1}},[s("span",{staticClass:"title"},[t._v("通道总余额")]),s("b",{staticStyle:{color:"#FA9D2A"}},[t._v(t._s((this.totalPassageInfo.totalBalance/100).toFixed(2)))])]),s("a-col",{staticClass:"stat-col bg-color-3",attrs:{span:4,offset:1}},[s("span",{staticClass:"title"},[t._v("通道自动日切状态")]),s("a-badge",{staticClass:"stat-content",attrs:{status:0===this.totalPassageInfo.payPassageAutoClean?"error":"processing",text:0===this.totalPassageInfo.payPassageAutoClean?"禁用中":"启用中"}})],1)],1)],1),s("JeepayTable",{ref:"infoTable",attrs:{initData:!1,reqTableDataFunc:t.reqTableDataFunc,tableColumns:t.tableColumns,searchData:t.searchData,pageSize:50,rowKey:"payPassageId"},on:{btnLoadClose:function(e){t.btnLoading=!1}},scopedSlots:t._u([{key:"payPassageId",fn:function(e){var a=e.record;return[s("span",{style:{color:0===a.state?"rgba(0, 0, 0, 0.25)":"#007CFD"}},[t._v("["+t._s(a.payPassageId)+"]")]),t._v(" "),s("span",{style:{color:0===a.state?"rgba(0, 0, 0, 0.25)":"#007CFD"}},[t._v(t._s(a.payPassageName))]),s("br"),s("span",{staticStyle:{"font-size":"13px",color:"#1E2229"},style:{color:0===a.state?"rgba(0, 0, 0, 0.25)":""}},[t._v("["+t._s(a.productId)+"]")]),t._v(" "),s("span",{staticStyle:{"font-size":"13px",color:"#1E2229"},style:{color:0===a.state?"rgba(0, 0, 0, 0.25)":""}},[t._v(t._s(a.productName))])]}},{key:"productId",fn:function(e){var a=e.record;return[s("span",{staticStyle:{color:"#007CFD"}},[t._v("["+t._s(a.productId)+"]")]),t._v(" "),s("span",[t._v(t._s(a.productName))])]}},{key:"balanceSlot",fn:function(e){var a=e.record;return[t.$access("ENT_MCH_APP_EDIT")?s("a-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.clickChangeBalance(a)}}},[t._v("调额")]):t._e(),t._v("  "),s("b",{style:{color:a.balance>0?"#4BD884":"#DB4B4B"}},[t._v(t._s((a.balance/100).toFixed(2)))])]}},{key:"weightsSlot",fn:function(e){var a=e.record;return[t.$access("ENT_MCH_APP_EDIT")?s("a-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.clickChangeWeights(a)}}},[t._v("设置")]):t._e(),t._v("  "),s("span",{staticStyle:{color:"#1E2229"}},[t._v(t._s(a.weights))])]}},{key:"stateSlot",fn:function(e){var a=e.record;return[s("JeepayTableColState",{attrs:{state:a.state,showSwitchType:!0,onChange:function(e){return t.onSwitchChange(a.payPassageId,e)}}})]}},{key:"rateSlot",fn:function(e){var a=e.record;return[s("a-tag",{attrs:{color:"blue"}},[s("b",[t._v(t._s((100*a.rate).toFixed(2))+"%")])])]}},{key:"quotaLimitStateSlot",fn:function(e){var a=e.record;return[t.$access("ENT_MCH_APP_EDIT")?s("a-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.clickChangeQuota(a)}}},[t._v("设置")]):t._e(),t._v("  "),s("a-badge",{attrs:{status:0===a.quotaLimitState?"error":"processing",text:0===a.quotaLimitState?"禁用":"启用"}}),t._v("  "),s("span",{style:{color:a.quota>0?"#4BD884":"#DB4B4B","text-decoration":0===a.quotaLimitState?"line-through":""}},[t._v(t._s((a.quota/100).toFixed(2)))])]}},{key:"timeLimitStateSlot",fn:function(e){var a=e.record;return[t.$access("ENT_MCH_APP_EDIT")?s("a-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.clickChangeTimeLimit(a)}}},[t._v("设置")]):t._e(),t._v("  "),s("a-badge",{attrs:{status:0===a.timeLimit?"error":"processing",text:0===a.timeLimit?"禁用":"启用"}}),t._v("  "),s("span",{staticStyle:{color:"#1E2229"}},[t._v(t._s(1===a.timeLimit?a.timeRules:""))])]}},{key:"successRateSlot",fn:function(e){var a=e.record;return[t._v("  "),s("span",{staticStyle:{color:"#1E2229"}},[t._v(t._s(a.successRate)+"%")])]}},{key:"configStrSlot",fn:function(e){var a=e.record;return[void 0!=a.payInterfaceConfig&&JSON.parse(a.payInterfaceConfig).mchNo.length>14?s("a-tooltip",{staticStyle:{"font-size":"13px",color:"#1E2229"},attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",[t._v(t._s(void 0!=a.payInterfaceConfig?JSON.parse(a.payInterfaceConfig).mchNo:""))])]),t._v(" "+t._s(void 0!=a.payInterfaceConfig?t.changeStr2ellipsis(JSON.parse(a.payInterfaceConfig).mchNo,14):"")+" ")],2):s("span",{staticStyle:{"font-size":"13px",color:"#1E2229"}},[t._v(t._s(void 0!=a.payInterfaceConfig?JSON.parse(a.payInterfaceConfig).mchNo:""))]),s("br"),s("span",{staticStyle:{"font-size":"13px",color:"#1E2229"}},[t._v(t._s(void 0!=a.payInterfaceConfig&&void 0!=JSON.parse(a.payInterfaceConfig).payType?JSON.parse(a.payInterfaceConfig).payType:""))])]}},{key:"opSlot",fn:function(e){var a=e.record;return[s("JeepayTableColumns",[s("a-button",{attrs:{type:"link"},on:{click:function(e){return t.detailFunc(a)}}},[t._v("查看")]),t.$access("ENT_MCH_APP_EDIT")?s("a-button",{attrs:{type:"link"},on:{click:function(e){return t.editFunc(a.payPassageId)}}},[t._v("通道修改")]):t._e(),t.$access("ENT_MCH_APP_EDIT")?s("a-button",{attrs:{type:"link"},on:{click:function(e){return t.editPassageMch(a)}}},[t._v("通道绑定")]):t._e(),t.$access("ENT_MCH_APP_EDIT")?s("a-button",{attrs:{type:"link"},on:{click:function(e){return t.showPayIfConfigList(a)}}},[t._v("支付接口配置")]):t._e(),t.$access("ENT_MCH_APP_EDIT")?s("a-button",{attrs:{type:"link"},on:{click:function(e){return t.copyAndNewPassage(a)}}},[t._v("一键复制通道")]):t._e(),t.$access("ENT_MCH_APP_EDIT")?s("a-button",{attrs:{type:"link"},on:{click:function(e){return t.passagePayTest(a)}}},[t._v("通道下单测试")]):t._e(),t.$access("ENT_MCH_APP_DEL")?s("a-button",{staticStyle:{color:"red"},attrs:{type:"link"},on:{click:function(e){return t.delFunc(a.payPassageId)}}},[t._v("删除支付通道")]):t._e()],1)]}}])})],1),[s("a-modal",{attrs:{title:"调整通道余额"},on:{ok:t.handleBalanceOkFunc},model:{value:t.isShowBalanceModal,callback:function(e){t.isShowBalanceModal=e},expression:"isShowBalanceModal"}},[s("a-form-model",{ref:"infoFormModel",attrs:{model:t.changeBalanceObject,"label-col":{span:6},"wrapper-col":{span:15},rules:t.changeBalanceRules}},[s("a-form-model-item",{attrs:{label:"支付通道名称："}},[s("b",{staticStyle:{color:"#007CFD"}},[t._v("["+t._s(t.selectPayPassage.payPassageId)+"]")]),t._v(" "),s("b",[t._v(t._s(t.selectPayPassage.payPassageName))])]),s("a-form-model-item",{attrs:{label:"调整金额：",prop:"changeAmount"}},[s("a-input",{attrs:{prefix:"￥",type:"number"},model:{value:t.changeBalanceObject.changeAmount,callback:function(e){t.$set(t.changeBalanceObject,"changeAmount",e)},expression:"changeBalanceObject.changeAmount"}}),s("b",{staticStyle:{color:"rgb(128,128,128)"}},[t._v("如需扣余额，则输入负数，例如:-10.50")])],1),s("a-form-model-item",{attrs:{label:"备注：",prop:"changeRemark"}},[s("a-input",{model:{value:t.changeBalanceObject.changeRemark,callback:function(e){t.$set(t.changeBalanceObject,"changeRemark",e)},expression:"changeBalanceObject.changeRemark"}})],1)],1)],1)],[s("a-modal",{attrs:{title:"调整通道权重"},on:{ok:t.handleWeightsOkFunc},model:{value:t.isShowWeightsModal,callback:function(e){t.isShowWeightsModal=e},expression:"isShowWeightsModal"}},[s("a-form-model",{ref:"weightsFormModel",attrs:{model:t.selectPayPassage,"label-col":{span:6},"wrapper-col":{span:15}}},[s("a-form-model-item",{attrs:{label:"支付通道名称："}},[s("b",{staticStyle:{color:"#007CFD"}},[t._v("["+t._s(t.selectPayPassage.payPassageId)+"]")]),t._v(" "),s("b",[t._v(t._s(t.selectPayPassage.payPassageName))])]),s("a-form-model-item",{attrs:{label:"轮询权重：",prop:"changeWeights"}},[s("a-input",{attrs:{type:"number"},model:{value:t.changeWeights,callback:function(e){t.changeWeights=e},expression:"changeWeights"}}),s("b",{staticStyle:{color:"rgb(128,128,128)"}},[t._v("输入1-10的整数")])],1)],1)],1)],[s("a-modal",{attrs:{title:"设置通道授信"},on:{ok:t.handleQuotaOkFunc},model:{value:t.isShowQuotaModal,callback:function(e){t.isShowQuotaModal=e},expression:"isShowQuotaModal"}},[s("a-form-model",{ref:"quotaFormModel",attrs:{model:t.changeQuotaObject,"label-col":{span:6},"wrapper-col":{span:15}}},[s("a-form-model-item",{attrs:{label:"支付通道名称："}},[s("b",{staticStyle:{color:"#007CFD"}},[t._v("["+t._s(t.selectPayPassage.payPassageId)+"]")]),t._v(" "),s("b",[t._v(t._s(t.selectPayPassage.payPassageName))])]),s("a-form-model-item",{attrs:{label:"授信限制状态："}},[s("a-radio-group",{model:{value:t.changeQuotaLimitState,callback:function(e){t.changeQuotaLimitState=e},expression:"changeQuotaLimitState"}},[s("a-radio",{attrs:{value:1}},[t._v(" 启用 ")]),s("a-radio",{attrs:{value:0}},[t._v(" 禁用 ")])],1)],1),s("a-form-model-item",{attrs:{label:"通道授信金额："}},[s("a-input",{attrs:{prefix:"￥",type:"number"},model:{value:t.changeQuotaNum,callback:function(e){t.changeQuotaNum=e},expression:"changeQuotaNum"}})],1)],1)],1)],[s("a-modal",{attrs:{title:"通道一键复制"},on:{ok:t.handleCopyAndNewOkFunc},model:{value:t.isShowCopyAndNewModal,callback:function(e){t.isShowCopyAndNewModal=e},expression:"isShowCopyAndNewModal"}},[s("a-form-model",{attrs:{"label-col":{span:6},"wrapper-col":{span:15}}},[s("a-form-model-item",{attrs:{label:"新支付通道名称："}},[s("a-input",{model:{value:t.newPassageName,callback:function(e){t.newPassageName=e},expression:"newPassageName"}})],1)],1)],1)],[s("a-modal",{attrs:{title:"通道定时开启设置"},on:{ok:t.handleTimeLimitOkFunc},model:{value:t.isShowTimeLimitModal,callback:function(e){t.isShowTimeLimitModal=e},expression:"isShowTimeLimitModal"}},[s("b",{staticStyle:{color:"rgb(128,128,128)"}},[t._v("设置通道的可用时间，如8:00-23:00，表示通道在这个时间段可用")]),s("br"),s("br"),s("b",{staticStyle:{color:"rgb(128,128,128)"}},[t._v("如:23:00-7:00，表示通道在前一天23点到后一天7点可用，可以跨天")]),s("br"),s("br"),s("a-form-model-item",{attrs:{label:"通道定时开关："}},[s("a-radio-group",{model:{value:t.changeTimeLimitState,callback:function(e){t.changeTimeLimitState=e},expression:"changeTimeLimitState"}},[s("a-radio",{attrs:{value:1}},[t._v(" 启用 ")]),s("a-radio",{attrs:{value:0}},[t._v(" 禁用 ")])],1)],1),s("a-time-picker",{attrs:{size:"large",disabled:"1"!=t.changeTimeLimitState,format:"HH:mm",placeholder:"开启时间"},model:{value:t.limitTimeStart,callback:function(e){t.limitTimeStart=e},expression:"limitTimeStart"}}),t._v("       "),s("a-time-picker",{attrs:{size:"large",disabled:"1"!=t.changeTimeLimitState,format:"HH:mm",placeholder:"关闭时间"},model:{value:t.limitTimeEnd,callback:function(e){t.limitTimeEnd=e},expression:"limitTimeEnd"}})],1)],[s("a-modal",{attrs:{title:"一键清空通道余额"},on:{ok:t.handleAllBalanceZeroOkFunc},model:{value:t.isShowSetZeroModal,callback:function(e){t.isShowSetZeroModal=e},expression:"isShowSetZeroModal"}},[s("a-form-model",{attrs:{"label-col":{span:8},"wrapper-col":{span:13}}},[s("a-form-model-item",{attrs:{label:"请输入谷歌验证码："}},[s("a-input",{model:{value:t.setZeroGoogleCode,callback:function(e){t.setZeroGoogleCode=e},expression:"setZeroGoogleCode"}})],1)],1)],1)],[s("a-modal",{attrs:{title:"关闭全部通道"},on:{ok:t.handleCloseAllOkFunc},model:{value:t.isShowCloseAllModal,callback:function(e){t.isShowCloseAllModal=e},expression:"isShowCloseAllModal"}},[s("a-form-model",{attrs:{"label-col":{span:8},"wrapper-col":{span:13}}},[s("b",{staticStyle:{color:"rgb(128,128,128)"}},[t._v("此操作将停止所有通道的定时任务!!")]),s("br"),s("br"),s("b",{staticStyle:{color:"rgb(128,128,128)"}},[t._v("可通过"),s("span",{staticStyle:{color:"#007eff"}},[t._v("[打开最近启用通道]")]),t._v("恢复到一键关闭前的通道状态")]),s("br"),s("br"),s("b",{staticStyle:{color:"rgb(128,128,128)","font-size":"13px"}},[t._v("使用一键关闭前的所有通道状态有效保存时间为三个小时")]),s("br"),s("b",{staticStyle:{color:"rgb(128,128,128)","font-size":"13px"}},[t._v("过期再使用 [打开最近启用通道] 操作无效请注意！！")]),s("br"),s("br"),s("a-form-model-item",{attrs:{label:"请输入谷歌验证码："}},[s("a-input",{model:{value:t.setCloseAllGoogleCode,callback:function(e){t.setCloseAllGoogleCode=e},expression:"setCloseAllGoogleCode"}})],1)],1)],1)],[s("a-modal",{attrs:{title:"打开最近启用通道"},on:{ok:t.handleOpenRecentlyOkFunc},model:{value:t.isShowOpenRecentlyModal,callback:function(e){t.isShowOpenRecentlyModal=e},expression:"isShowOpenRecentlyModal"}},[s("a-form-model",{attrs:{"label-col":{span:8},"wrapper-col":{span:13}}},[s("b",{staticStyle:{color:"rgb(128,128,128)"}},[t._v("此操作会将所有通道状态恢复到"),s("span",{staticStyle:{color:"#FF4D4F"}},[t._v("[关闭全部通道]")]),t._v("操作前的状态")]),s("br"),s("br"),s("b",{staticStyle:{color:"rgb(128,128,128)"}},[t._v("包含通道状态、定时任务开启状态")]),s("br"),s("br"),s("b",{staticStyle:{color:"rgb(128,128,128)","font-size":"13px"}},[t._v("使用一键关闭前的所有通道状态有效保存时间为三个小时")]),s("br"),s("b",{staticStyle:{color:"rgb(128,128,128)","font-size":"13px"}},[t._v("过期再使用 [打开最近启用通道] 操作无效请注意！！")]),s("br"),s("br")])],1)],[s("a-modal",{attrs:{title:"设置通道自动日切清零"},on:{ok:t.handleSetAutoCleanOkFunc},model:{value:t.isShowSetAutoCleanModal,callback:function(e){t.isShowSetAutoCleanModal=e},expression:"isShowSetAutoCleanModal"}},[s("a-form-model",{attrs:{"label-col":{span:8},"wrapper-col":{span:13}}},[s("b",{staticStyle:{color:"rgb(128,128,128)"}},[t._v("开启后每天北京时间 00:00 自动清空所有通道余额")]),s("br"),s("br"),s("a-form-model-item",{attrs:{label:"通道自动日切开关："}},[s("a-radio-group",{model:{value:t.autoCleanEnable,callback:function(e){t.autoCleanEnable=e},expression:"autoCleanEnable"}},[s("a-radio",{attrs:{value:1}},[t._v(" 启用 ")]),s("a-radio",{attrs:{value:0}},[t._v(" 禁用 ")])],1)],1),s("a-form-model-item",{attrs:{label:"请输入谷歌验证码："}},[s("a-input",{model:{value:t.setAutoCleanGoogleCode,callback:function(e){t.setAutoCleanGoogleCode=e},expression:"setAutoCleanGoogleCode"}})],1)],1)],1)],s("MchAppAddOrEdit",{ref:"mchAppAddOrEdit",attrs:{callbackFunc:t.addOrEdit}}),s("PayPassageDetail",{ref:"payPassageDetail"}),s("MchPayConfigAddOrEdit",{ref:"mchPayConfigAddOrEdit",attrs:{callbackFunc:t.addOrEdit}}),s("PassageMchBlindEdit",{ref:"passageMchBlindEdit",attrs:{callbackFunc:t.addOrEdit}}),s("PassagePayTest",{ref:"passagePayTest"})],2)},o=[],i=(a("b680"),a("ac1f"),a("1276"),a("d3b7"),a("f339")),r=a("4f53"),l=a("5d5e"),n=a("0fea"),c=a("5071"),d=a("e789"),u=a("af4e"),p=a("2aef"),m=a("c1df"),h=a.n(m),f=a("9813"),g=a("c22a"),b=[{key:"payPassageId",fixed:"left",width:"240px",title:"通道名称/所属产品",scopedSlots:{customRender:"payPassageId"}},{key:"state",title:"状态",width:100,scopedSlots:{customRender:"stateSlot"}},{key:"balance",title:"通道余额",width:180,scopedSlots:{customRender:"balanceSlot"}},{key:"weightsSlot",title:"轮询权重",width:100,scopedSlots:{customRender:"weightsSlot"}},{key:"quotaLimitState",width:210,title:"通道授信限制",scopedSlots:{customRender:"quotaLimitStateSlot"}},{key:"timeLimitState",width:210,title:"通道定时设置",scopedSlots:{customRender:"timeLimitStateSlot"}},{key:"rate",title:"通道费率",scopedSlots:{customRender:"rateSlot"}},{key:"successRate",title:"成功率(天)",scopedSlots:{customRender:"successRateSlot"}},{key:"configStr",width:160,title:"三方用户/通道标识",scopedSlots:{customRender:"configStrSlot"}},{key:"op",title:"操作",width:"280px",fixed:"right",align:"center",scopedSlots:{customRender:"opSlot"}}],y={name:"MchAppPage",components:{JeepayTableColState:g["a"],PassagePayTest:f["default"],JeepayTable:i["a"],JeepayTableColumns:l["a"],JeepayTextUp:r["a"],MchAppAddOrEdit:c["default"],MchPayConfigAddOrEdit:d["default"],PayPassageDetail:u["default"],PassageMchBlindEdit:p["default"]},data:function(){return{btnLoading:!1,tableColumns:b,searchData:{},productList:{},isShowBalanceModal:!1,isShowWeightsModal:!1,isShowQuotaModal:!1,isShowTimeLimitModal:!1,isShowCopyAndNewModal:!1,isShowSetZeroModal:!1,isShowSetAutoCleanModal:!1,isShowCloseAllModal:!1,isShowOpenRecentlyModal:!1,newPassageName:"",copiedPassage:{},selectPayPassage:{},changeObject:{},changeBalanceObject:{},changeWeights:0,changeQuotaObject:{},changeQuotaNum:0,setZeroGoogleCode:"",setCloseAllGoogleCode:"",setAutoCleanGoogleCode:"",changeQuotaLimitState:!1,changeTimeLimitState:!1,limitTimeStart:"",limitTimeEnd:"",autoCleanEnable:0,totalPassageInfo:{passageNum:0,totalBalance:0},changeBalanceRules:{changeRemark:[{required:!0,message:"请输入调额备注",trigger:"blur"}],changeAmount:[{required:!0,message:"请输入调整金额",trigger:"blur"}]},stateLoading:!1}},mounted:function(){this.queryFunc();var e=this;n["cb"].list(n["D"],{pageSize:-1}).then((function(t){e.productList=t.records})),this.getPassageStatInfo()},methods:{queryFunc:function(){var e=this;this.btnLoading=!0,this.$refs.infoTable.refTable(!0),n["cb"].postDataNormal("/api/passageRealTimeStat","",e.searchData).then((function(t){e.totalPassageInfo=t}))},reqTableDataFunc:function(e){return n["cb"].list(n["i"],e)},searchFunc:function(){this.$refs.infoTable.refTable(!0)},addOrEdit:function(){this.$refs.infoTable.refTable()},addFunc:function(){this.$refs.mchAppAddOrEdit.show()},editFunc:function(e){this.$refs.mchAppAddOrEdit.show(e)},editPassageMch:function(e){this.$refs.passageMchBlindEdit.show(e)},detailFunc:function(e){this.$refs.payPassageDetail.show(e)},delFunc:function(e){var t=this;this.$infoBox.confirmDanger("确认删除？","",(function(){n["cb"].delById(n["i"],e).then((function(e){t.$message.success("删除成功！"),t.searchFunc()}))}))},showPayIfConfigList:function(e){this.$refs.mchPayConfigAddOrEdit.show(e)},copyAndNewPassage:function(e){this.newPassageName="",this.copiedPassage=e,this.isShowCopyAndNewModal=!0},passagePayTest:function(e){for(var t="",a=0;a<this.productList.length;a++)if(e.productId===this.productList[a].productId){t=this.productList[a].productName;break}this.$refs.passagePayTest.show(e,t)},clickChangeBalance:function(e){this.isShowBalanceModal=!0,this.selectPayPassage=e,void 0!==this.$refs.infoFormModel&&this.$refs.infoFormModel.resetFields(),this.changeBalanceObject={}},clickChangeWeights:function(e){this.isShowWeightsModal=!0,this.selectPayPassage=e,void 0!==this.$refs.weightsFormModel&&this.$refs.weightsFormModel.resetFields(),this.changeWeights=e.weights},clickChangeQuota:function(e){this.isShowQuotaModal=!0,this.selectPayPassage=e,void 0!==this.$refs.quotaFormModel&&this.$refs.quotaFormModel.resetFields(),this.changeQuotaNum=(e.quota/100).toFixed(2),this.changeQuotaLimitState=e.quotaLimitState},clickChangeTimeLimit:function(e){if(this.isShowTimeLimitModal=!0,this.limitTimeStart=null,this.limitTimeEnd=null,this.selectPayPassage=e,this.changeTimeLimitState=e.timeLimit,""!==e.timeRules&&"|"!==e.timeRules){var t=e.timeRules.split("|"),a="HH:mm";this.limitTimeStart=h()(t[0],a),this.limitTimeEnd=h()(t[1],a)}},handleBalanceOkFunc:function(){var e=this;""!==this.changeBalanceObject.changeAmount&&void 0!==this.changeBalanceObject.changeAmount?""!==this.changeBalanceObject.changeRemark&&void 0!==this.changeBalanceObject.changeRemark?(n["cb"].updateById(n["j"],this.selectPayPassage.payPassageId,this.changeBalanceObject).then((function(t){e.$refs.infoTable.refTable(),e.$message.success("修改成功")})),this.isShowBalanceModal=!1):this.$message.error("备注不能为空"):this.$message.error("金额不能为空")},handleWeightsOkFunc:function(){var e=this;"number"===typeof this.changeWeights&&!isNaN(this.changeWeights)||!(this.changeWeights<1||this.changeWeights>10)?(this.changeObject=this.selectPayPassage,this.changeObject.weights=this.changeWeights,n["cb"].updateById(n["i"],this.selectPayPassage.payPassageId,this.changeObject).then((function(t){e.$refs.infoTable.refTable(),e.$message.success("修改成功")})),this.isShowWeightsModal=!1):this.$message.error("请输入1-10的整数")},handleQuotaOkFunc:function(){var e=this;this.changeObject=this.selectPayPassage,this.changeObject.quotaLimitState=this.changeQuotaLimitState,this.changeObject.quota=100*this.changeQuotaNum,this.isShowQuotaModal=!1,n["cb"].updateById(n["i"],this.selectPayPassage.payPassageId,this.changeObject).then((function(t){e.$refs.infoTable.refTable(),e.$message.success("修改成功")}))},handleCopyAndNewOkFunc:function(){var e=this;if(""!==this.newPassageName.replaceAll(" ","")){var t=this,a=JSON.parse(JSON.stringify(t.copiedPassage));a.payPassageId=null,a.state=1,a.balance=0,a.payPassageName=t.newPassageName.replaceAll(" ",""),this.isShowCopyAndNewModal=!1,n["cb"].add(n["i"],a).then((function(a){t.$message.success("新增成功"),e.$refs.infoTable.refTable()}))}else this.$message.error("请输入通道名称")},handleTimeLimitOkFunc:function(){var e=this;this.changeObject=this.selectPayPassage;var t="",a="";!this.changeTimeLimitState||null!=this.limitTimeStart&&null!=this.limitTimeEnd?(null!==this.limitTimeStart&&(t=this.limitTimeStart.format("HH:mm")),null!==this.limitTimeStart&&(a=this.limitTimeEnd.format("HH:mm")),t!==a?(this.changeObject.timeRules=t+"|"+a,this.changeObject.timeLimit=this.changeTimeLimitState,this.isShowTimeLimitModal=!1,n["cb"].updateById(n["i"],this.selectPayPassage.payPassageId,this.changeObject).then((function(t){e.$refs.infoTable.refTable(),e.$message.success("修改成功")}))):this.$message.error("开启、关闭时间不能相同")):this.$message.error("请选择开启、关闭时间")},setAllBalanceZero:function(){this.isShowSetZeroModal=!0,this.setZeroGoogleCode=""},setCloseAll:function(){this.isShowCloseAllModal=!0,this.setCloseAllGoogleCode=""},setOpenRecently:function(){this.isShowOpenRecentlyModal=!0},setAutoClean:function(){this.isShowSetAutoCleanModal=!0,this.setAutoCleanGoogleCode=""},handleSetAutoCleanOkFunc:function(){var e=this,t={};t.googleCode=this.setAutoCleanGoogleCode,t.autoCleanEnable=this.autoCleanEnable,void 0!==this.setAutoCleanGoogleCode&&""!==this.setAutoCleanGoogleCode?(this.isShowSetAutoCleanModal=!1,n["cb"].postDataNormal("/api/passageStatInfo","setPassageAutoClean/",t).then((function(t){e.getPassageStatInfo(),e.$message.success("设置成功")}))):this.$message.error("请输入谷歌验证码")},handleAllBalanceZeroOkFunc:function(){var e=this,t={};t.googleCode=this.setZeroGoogleCode,void 0!==this.setZeroGoogleCode&&""!==this.setZeroGoogleCode?(this.isShowSetZeroModal=!1,n["cb"].postDataNormal(n["n"],"resetAll/",t).then((function(t){e.$refs.infoTable.refTable(),e.$message.success("通道清空成功")}))):this.$message.error("请输入谷歌验证码")},handleCloseAllOkFunc:function(){var e=this,t={};t.googleCode=this.setCloseAllGoogleCode,void 0!==this.setCloseAllGoogleCode&&""!==this.setCloseAllGoogleCode?(this.isShowCloseAllModal=!1,n["cb"].postDataNormal(n["m"],"closeAll/",t).then((function(t){e.$refs.infoTable.refTable(),e.$message.success("关闭全部通道成功")}))):this.$message.error("请输入谷歌验证码")},handleOpenRecentlyOkFunc:function(){var e=this;this.isShowOpenRecentlyModal=!1,n["cb"].postDataNormal(n["m"],"openRecently/","").then((function(t){e.$refs.infoTable.refTable(),e.$message.success("恢复最近关闭通道状态成功")}))},getPassageStatInfo:function(){var e=this;n["cb"].getNormal(n["C"],"statPassageInfo").then((function(t){e.totalPassageInfo=t,e.autoCleanEnable=t.payPassageAutoClean}))},changeStr2ellipsis:function(e,t){var a=parseInt(t/2);return e.substring(0,a-1)+"..."+e.substring(e.length-a,e.length)},onSwitchChange:function(e,t){var a=this,s=1===t?"确认[启用]该通道？":"确认[停用]该通道？",o=1===t?"启用后请检查额度限制、通道绑定、定时任务等,确保通道正常拉起":"请注意手动停用将立即关闭通道定时任务！",i={state:t};return 0===t&&(i.timeLimit=0),new Promise((function(t,r){a.$infoBox.confirmDanger(s,o,(function(){return n["db"].updateById(n["i"],e,i).then((function(e){a.searchFunc(),t()})).catch((function(e){return r(e)}))}),(function(){r(new Error)}))}))}}},v=y,_=(a("4a72"),a("2877")),S=Object(_["a"])(v,s,o,!1,null,"12a76c6a",null);t["default"]=S.exports},"4a72":function(e,t,a){"use strict";a("c958")},5071:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{visible:e.visible,title:e.isAdd?"新增通道":"修改通道",width:"40%",maskClosable:!0},on:{close:e.onClose}},[a("a-form-model",{ref:"infoFormModel",attrs:{model:e.saveObject,layout:"vertical",rules:e.rules}},[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"通道名称",prop:"payPassageName"}},[a("a-input",{attrs:{placeholder:"请输入"},model:{value:e.saveObject.payPassageName,callback:function(t){e.$set(e.saveObject,"payPassageName",t)},expression:"saveObject.payPassageName"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{staticClass:"table-head-layout",attrs:{label:""}},[a("a-select",{attrs:{allowClear:!0,placeholder:"对应产品","show-search":"","option-filter-prop":"children"},model:{value:e.saveObject.productId,callback:function(t){e.$set(e.saveObject,"productId",t)},expression:"saveObject.productId"}},e._l(e.productList,(function(t){return a("a-select-option",{key:t.productId,attrs:{value:t.productId}},[e._v(" "+e._s(t.productName+" [ ID: "+t.productId+" ]")+" ")])})),1)],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"所属支付接口",prop:"ifCode"}},[a("a-select",{attrs:{placeholder:"请选择对应支付接口",allowClear:!0,"show-search":"","option-filter-prop":"children"},model:{value:e.saveObject.ifCode,callback:function(t){e.$set(e.saveObject,"ifCode",t)},expression:"saveObject.ifCode"}},e._l(e.payDefines,(function(t){return a("a-select-option",{key:t.ifCode,attrs:{value:t.ifCode}},[e._v(" "+e._s(t.ifName+" [ 接口代码: "+t.ifCode+" ]")+" ")])})),1)],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"收款方式",prop:"payType"}},[a("a-select",{attrs:{placeholder:"请选择收款方式"},model:{value:e.saveObject.payType,callback:function(t){e.$set(e.saveObject,"payType",t)},expression:"saveObject.payType"}},[a("a-select-option",{key:1,attrs:{value:1}},[e._v("区间范围 "),a("span",{staticStyle:{color:"#8C8C8C","font-size":"12px"}},[e._v("[例如:10-50000]")])]),a("a-select-option",{key:2,attrs:{value:2}},[e._v("固定金额 "),a("span",{staticStyle:{color:"#8C8C8C","font-size":"12px"}},[e._v("[例如:100|200|300]")])])],1)],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"收款规则",prop:"payRules"}},[a("a-input",{attrs:{placeholder:e.saveObject.payRules,type:"textarea"},model:{value:e.saveObject.payRules,callback:function(t){e.$set(e.saveObject,"payRules",t)},expression:"saveObject.payRules"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"通道费率"}},[a("a-input",{attrs:{prefix:"%",placeholder:"请输入",type:"number"},model:{value:e.rate,callback:function(t){e.rate=t},expression:"rate"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"代理商户号"}},[a("a-select",{attrs:{placeholder:"请选择代理商",allowClear:!0,"default-value":""},model:{value:e.saveObject.agentNo,callback:function(t){e.$set(e.saveObject,"agentNo",t)},expression:"saveObject.agentNo"}},e._l(e.isvList,(function(t){return a("a-select-option",{key:t.agentNo,attrs:{value:t.agentNo}},[e._v(" "+e._s(t.agentName+" [ ID: "+t.agentNo+" ]")+" ")])})),1)],1)],1),null!=e.saveObject.agentNo&&""!=e.saveObject.agentNo?a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"代理费率"}},[a("a-input",{attrs:{prefix:"%",placeholder:"请输入",type:"number"},model:{value:e.lastAgentRate,callback:function(t){e.lastAgentRate=t},expression:"lastAgentRate"}})],1)],1):e._e()],1)],1),a("div",{staticClass:"drawer-btn-center"},[a("a-button",{style:{marginRight:"8px"},attrs:{icon:"close"},on:{click:e.onClose}},[e._v("取消")]),a("a-button",{attrs:{type:"primary",icon:"check"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)},o=[],i=(a("b680"),a("ac1f"),a("1276"),a("a9e3"),a("0fea")),r={props:{callbackFunc:{type:Function,default:function(){return function(){return{}}}}},data:function(){return{isAdd:!0,visible:!1,passageId:"",saveObject:{},rules:{payRules:[{required:!0,message:"请输入收款规则",trigger:"blur"}],payType:[{required:!0,message:"选择收款规则",trigger:"blur"}],productId:[{required:!0,message:"选择支付产品",trigger:"blur"}],ifCode:[{required:!0,message:"选择支付接口",trigger:"blur"}],payPassageName:[{required:!0,message:"请输入支付通道名称",trigger:"blur"}]},lastAgentRate:0,rate:0,productList:{},payDefines:{},isvList:null}},methods:{show:function(e){this.isAdd=!e,this.saveObject={},this.isAdd&&(this.lastAgentRate=0,this.rate=0,this.saveObject={state:1}),i["cb"].list(i["h"],{pageSize:-1}).then((function(e){t.isvList=e.records})),i["cb"].list(i["D"],{pageSize:-1}).then((function(e){t.productList=e.records})),i["cb"].list(i["e"],{pageSize:-1}).then((function(e){t.payDefines=e})),void 0!==this.$refs.infoFormModel&&this.$refs.infoFormModel.resetFields();var t=this;this.isAdd?t.visible=!0:(t.passageId=e,i["cb"].getById(i["i"],e).then((function(e){t.saveObject=e,t.lastAgentRate=(100*t.saveObject.agentRate).toFixed(2),t.rate=(100*t.saveObject.rate).toFixed(2)})),this.visible=!0)},onSubmit:function(){var e=this,t=this;this.$refs.infoFormModel.validate((function(a){if(a){if(1===t.saveObject.payType){var s=t.saveObject.payRules.split("-");if(2!==s.length)return void t.$message.error("收款规则格式错误,例如:10-50000");var o=Number(s[0]),r=Number(s[1]);if("number"!==typeof o||isNaN(o)||"number"!==typeof r||isNaN(r))return void t.$message.error("收款规则格式错误,例如:10-50000");if(o>r)return void t.$message.error("收款规则范围错误,例如:10-50000")}else{var l=t.saveObject.payRules.split("|");if(null==l||0===l.length){var n=Number(l);if("number"!==typeof n||isNaN(n))return void t.$message.error("收款规则格式错误,例如:100|200|300")}for(var c=0;c<l.length;c++){var d=Number(l[c]);if("number"!==typeof d||isNaN(d))return void t.$message.error("收款规则格式错误,例如:100|200|300")}}var u=/^\d+(?:\.\d+)?$/;u.test(e.rate)||t.$message.error("费率格式错误"),e.saveObject.agentRate=e.lastAgentRate/100,null!=e.saveObject.agentNo&&void 0!==e.saveObject.agentNo||(e.saveObject.agentNo="",e.saveObject.agentRate=0),e.saveObject.rate=e.rate/100,t.isAdd?i["cb"].add(i["i"],t.saveObject).then((function(e){t.$message.success("新增成功"),t.visible=!1,t.callbackFunc()})):(0===t.saveObject.state&&(t.saveObject.timeLimit=0),i["cb"].updateById(i["i"],t.saveObject.payPassageId,t.saveObject).then((function(e){t.$message.success("修改成功"),t.visible=!1,t.callbackFunc(!0)})))}}))},onClose:function(){this.visible=!1}}},l=r,n=a("2877"),c=Object(n["a"])(l,s,o,!1,null,"886f656a",null);t["default"]=c.exports},"909a":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-upload",{attrs:{name:"file",action:e.action,headers:e.headers,accept:e.accept,showUploadList:!1,multiple:!0,"before-upload":e.beforeUpload},on:{change:e.handleChange}},[e._t("uploadSlot",null,{loading:e.loading})],2)],1)},o=[],i=(a("a9e3"),a("381c")),r=a("ffef");function l(){var e={};return e[i["b"].ACCESS_TOKEN_NAME]=r["a"].getToken(),e}var n={name:"JeepayUpload",props:{action:{type:String,default:""},accept:{type:String,default:""},size:{type:Number,default:10},num:{type:Number,default:1}},data:function(){return{loading:!1,fileList:[],headers:l()}},created:function(){},methods:{handleChange:function(e){var t=e.file.response;"uploading"===e.file.status&&(this.loading=!0),"done"===e.file.status?(0!==t.code&&this.$message.error(t.msg),this.loading=!1,this.$emit("uploadSuccess",t.data)):"error"===e.file.status&&(console.log(e),this.$message.error("上传失败"))},beforeUpload:function(e){var t=e.size/1024/1024<this.size;return t||this.$message.error("文件应小于"+this.size+"M!"),t}}},c=n,d=a("2877"),u=Object(d["a"])(c,s,o,!1,null,null,null);t["a"]=u.exports},9813:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{visible:e.visible,title:"通道下单测试",width:"40%",maskClosable:!1},on:{close:e.onClose}},[a("a-row",{attrs:{justify:"space-between",type:"flex"}},[a("a-col",{attrs:{sm:12}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"通道ID"}},[a("b",{staticStyle:{color:"#1A79FF"}},[e._v(e._s(e.passage.payPassageId))])])],1)],1),a("a-col",{attrs:{sm:12}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"通道名称"}},[a("b",[e._v(e._s(e.passage.payPassageName))])])],1)],1),a("a-col",{attrs:{sm:24}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"所属产品"}},[a("a-tag",{attrs:{color:"purple"}},[e._v(" ["+e._s(e.passage.productId)+"] "+e._s(e.productName)+" ")])],1)],1)],1),a("a-col",{attrs:{sm:12}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"收款规则类型"}},[1==e.passage.payType?a("a-tag",{attrs:{color:"blue"}},[e._v("区间范围")]):e._e(),2==e.passage.payType?a("a-tag",{attrs:{color:"blue"}},[e._v("固定金额")]):e._e()],1)],1)],1),a("a-col",{attrs:{sm:12}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"收款规则"}},[a("b",{attrs:{color:"pink"}},[e._v("[ "+e._s(e.passage.payRules)+" ]")])])],1)],1),a("a-divider"),a("a-col",{attrs:{sm:24}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"三方通道用户标识"}},[a("b",[e._v(e._s(e.ifParams.mchNo))])])],1)],1),a("a-col",{attrs:{sm:24}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"下单网关"}},[a("span",[e._v(e._s(e.ifParams.payGateway))])])],1)],1),a("a-divider"),a("a-form-model",{ref:"infoFormModel",attrs:{layout:"vertical"}},[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"支付金额"}},[a("a-input",{attrs:{prefix:"￥",placeholder:"请输入",type:"number"},model:{value:e.payTestAmount,callback:function(t){e.payTestAmount=t},expression:"payTestAmount"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"测试订单入库："}},[a("p",{staticStyle:{"font-size":"13px",color:"#8C8C8C"}},[e._v("[启用] 此选项自动挂到测试商户下，用于测试下单完整流程包含回调"),a("br"),e._v("[禁用] 不进入订单库，仅用于测试三方通道是否能正常拉起")]),a("a-radio-group",{model:{value:e.testOrderIn,callback:function(t){e.testOrderIn=t},expression:"testOrderIn"}},[a("a-radio",{attrs:{value:1}},[e._v(" 启用 ")]),a("a-radio",{attrs:{value:0}},[e._v(" 禁用 ")])],1)],1)],1),a("a-col",{attrs:{span:24}},[a("a-button",{attrs:{type:"primary",icon:"check"},on:{click:e.onSubmit}},[e._v("下单测试")])],1)],1)],1)],1),a("a-divider"),a("a-row",{attrs:{justify:"start",type:"flex"}},[a("a-col",{attrs:{sm:24}},[a("a-form-model-item",{attrs:{label:"测试商户订单号"}},[a("a-input",{staticStyle:{color:"black"},attrs:{type:"text",disabled:"disabled"},model:{value:e.testPayOrderId,callback:function(t){e.testPayOrderId=t},expression:"testPayOrderId"}}),e.isShowReturnUrl&&1===e.testOrderIn?a("a-button",{attrs:{type:"danger",icon:"double-right"},on:{click:e.goOrderList}},[e._v("去订单页查看")]):e._e()],1)],1)],1),a("a-row",{attrs:{justify:"start",type:"flex"}},[a("a-col",{attrs:{sm:24}},[a("a-form-model-item",{attrs:{label:"下单返回参数"}},[a("a-input",{staticStyle:{height:"100px",color:"black"},attrs:{type:"textarea",disabled:"disabled"},model:{value:e.respParams,callback:function(t){e.respParams=t},expression:"respParams"}})],1)],1)],1),e.isShowReturnUrl?a("a-row",{attrs:{justify:"start",type:"flex"}},[a("a-col",{attrs:{sm:24}},[a("a-form-model-item",{attrs:{label:"支付链接（点击直接跳转）"}},[a("a",{staticStyle:{"font-size":"18px"},attrs:{href:e.returnUrl,target:"_blank"}},[e._v(e._s(e.returnUrl))])])],1),a("a-col",{attrs:{sm:24}},[a("a-form-model-item",{attrs:{label:"手动跳转"}},[a("a-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.returnUrl,expression:"returnUrl",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"}],staticClass:"copy-btn",attrs:{type:"primary",size:"small"}},[e._v("一键复制链接")])],1)],1)],1):e._e()],1)},o=[],i=a("0fea"),r={props:{callbackFunc:{type:Function,default:function(){return function(){return{}}}}},data:function(){return{visible:!1,payTestAmount:0,productName:"",passage:{},ifParams:{},respParams:"",testPayOrderId:"",isShowReturnUrl:!1,returnUrl:"",testOrderIn:0}},methods:{show:function(e,t){this.passage=e,this.productName=t,void 0!==e.payInterfaceConfig&&(this.ifParams=JSON.parse(e.payInterfaceConfig)),this.visible=!0,this.payTestAmount=0,this.respParams="",this.testPayOrderId="",this.isShowReturnUrl=!1,this.returnUrl="",this.testOrderIn=0},onSubmit:function(){var e=this;if(""!==this.payTestAmount&&0!==this.payTestAmount){var t="T"+(new Date).getTime()+Math.floor(8999*Math.random()+1e3),a={},s=this;a.testOrderNo=t,a.passageId=this.passage.payPassageId,a.amount=this.payTestAmount,a.testOrderIn=this.testOrderIn,a.productId=this.passage.productId,s.$store.commit("showLoading"),Object(i["ab"])(a).then((function(a){s.$store.commit("hideLoading"),s.testPayOrderId=t,0===a.code?(e.$message.info("下单成功"),s.respParams=JSON.stringify(a),void 0!==a.data.payData&&null!==a.data.payData&&(s.returnUrl=a.data.payData,s.isShowReturnUrl=!0)):(s.respParams=JSON.stringify(a.msg),s.$message.error("拉起支付失败"))})).catch((function(t){e.$message.error("拉起支付失败"),s.respParams=JSON.stringify(t),s.$store.commit("hideLoading")}))}else this.$message.error("金额不能为空")},onClose:function(){this.visible=!1},onCopy:function(){this.$message.success("复制成功")},goOrderList:function(){this.$router.push({path:"/pay",query:{unionOrderId:this.testPayOrderId}}),this.visible=!1}}},l=r,n=a("2877"),c=Object(n["a"])(l,s,o,!1,null,"3b8e820a",null);t["default"]=c.exports},"9d22":function(e,t,a){"use strict";a("fd66")},af4e:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{width:"50%",placement:"right",closable:!0,visible:e.visible,title:!0===e.visible?"支付通道详情":""},on:{close:e.onClose}},[a("a-row",{attrs:{justify:"space-between",type:"flex"}},[a("a-col",{attrs:{sm:12}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"通道ID"}},[a("b",{staticStyle:{color:"#1A79FF"}},[e._v(e._s(e.detailData.payPassageId))])])],1)],1),a("a-col",{attrs:{sm:12}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"通道名称"}},[a("b",[e._v(e._s(e.detailData.payPassageName))])])],1)],1),a("a-col",{attrs:{sm:24}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"所属产品"}},[a("a-tag",{attrs:{color:"purple"}},[e._v(" ["+e._s(e.detailData.productId)+"] "+e._s(e.detailData.productName)+" ")])],1)],1)],1),a("a-col",{attrs:{sm:12}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"收款规则类型"}},[1==e.detailData.payType?a("a-tag",{attrs:{color:"blue"}},[e._v("区间范围")]):e._e(),2==e.detailData.payType?a("a-tag",{attrs:{color:"blue"}},[e._v("固定金额")]):e._e()],1)],1)],1),a("a-col",{attrs:{sm:12}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"收款规则"}},[a("b",{attrs:{color:"pink"}},[e._v("[ "+e._s(e.detailData.payRules)+" ]")])])],1)],1),a("a-col",{attrs:{sm:12}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"创建时间"}},[e._v(" "+e._s(e.detailData.createdAt)+" ")])],1)],1),a("a-col",{attrs:{sm:12}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"更新时间"}},[e._v(" "+e._s(e.detailData.updatedAt)+" ")])],1)],1),a("a-divider"),a("a-col",{attrs:{sm:12}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"支付接口代码"}},[e._v(" "+e._s(e.detailData.ifCode)+" ")])],1)],1),a("a-divider"),a("a-col",{attrs:{sm:12}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"通道费率"}},[a("b",[e._v(e._s((100*e.detailData.rate).toFixed(2))+"%")])])],1)],1),a("a-divider"),a("a-col",{attrs:{sm:12}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:" 代理商商户号"}},[e._v(" "+e._s(""==e.detailData.agentNo?"无通道代理":e.detailData.agentNo)+" ")])],1)],1),a("a-col",{attrs:{sm:12}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"代理费率"}},[a("b",[e._v(e._s((100*e.detailData.agentRate).toFixed(2))+"%")])])],1)],1),a("a-divider"),a("a-col",{attrs:{sm:24}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"轮询权重"}},[a("b",[e._v(e._s(e.detailData.weights))])])],1)],1)],1),a("a-divider"),a("a-col",{attrs:{sm:12}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"通道授信限制"}},[a("a-badge",{attrs:{status:0===e.detailData.quotaLimitState?"error":"processing",text:0===e.detailData.quotaLimitState?"禁用":"启用"}})],1)],1)],1),a("a-col",{attrs:{sm:12}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"通道授信限制"}},[a("a-tag",{attrs:{color:"blue"}},[e._v(" "+e._s((e.detailData.quota/100).toFixed(2))+" ")])],1)],1)],1),a("a-divider"),a("a-row",{attrs:{justify:"start",type:"flex"}},[a("a-col",{attrs:{sm:24}},[a("a-form-model-item",{attrs:{label:"支付参数配置"}},[a("a-input",{staticStyle:{height:"100px",color:"black"},attrs:{type:"textarea",disabled:"disabled"},model:{value:e.detailData.payInterfaceConfig,callback:function(t){e.$set(e.detailData,"payInterfaceConfig",t)},expression:"detailData.payInterfaceConfig"}})],1)],1)],1)],1)},o=[],i={props:{callbackFunc:{type:Function,default:function(){return function(){return{}}}}},data:function(){return{isAdd:!0,visible:!1,appId:"",saveObject:{},detailData:{},rules:{payRules:[{required:!0,message:"请输入收款规则",trigger:"blur"}],payType:[{required:!0,message:"选择收款规则",trigger:"blur"}],productId:[{required:!0,message:"选择支付产品",trigger:"blur"}],ifCode:[{required:!0,message:"选择支付接口",trigger:"blur"}],payPassageName:[{required:!0,message:"请输入支付通道名称",trigger:"blur"}]},productList:{},payDefines:{},isvList:null}},methods:{show:function(e){this.visible=!0,this.detailData=e},onClose:function(){this.visible=!1}}},r=i,l=a("2877"),n=Object(l["a"])(r,s,o,!1,null,"225d9c4a",null);t["default"]=n.exports},c22a:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.showSwitchType?e._e():[0==e.state?a("div",[a("a-badge",{attrs:{status:"error",text:"停用"}})],1):1==e.state?a("div",[a("a-badge",{attrs:{status:"processing",text:"启用"}})],1):a("div",[a("a-badge",{attrs:{status:"warning",text:"未知"}})],1)],e.showSwitchType?[a("a-switch",{staticClass:"els",attrs:{"checked-children":"启用","un-checked-children":"停用",checked:e.switchChecked},on:{change:e.onChangeInner}})]:e._e()],2)},o=[],i=(a("a9e3"),a("d3b7"),{name:"JeepayTableColState",props:{state:{type:Number,default:-1},showSwitchType:{type:Boolean,default:!1},onChange:{type:Function,default:function(e){return new Promise((function(e){e()}))}}},data:function(){return{switchChecked:!1}},mounted:function(){this.switchChecked=1===this.state},watch:{state:function(e,t){this.switchChecked=1===this.state}},methods:{onChangeInner:function(e){var t=this;this.switchChecked=e,this.onChange(e?1:0).then().catch((function(a){t.$nextTick((function(){t.switchChecked=!e}))}))}}}),r=i,l=a("2877"),n=Object(l["a"])(r,s,o,!1,null,null,null);t["a"]=n.exports},c73b:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("a-row",{staticStyle:{width:"100%"},attrs:{gutter:[24,24]}},[e.addAuthority?s("a-col",{attrs:{xxl:24/e.span.xxl,xl:24/e.span.xl,lg:24/e.span.lg,md:24/e.span.md,sm:24/e.span.sm,xs:24/e.span.xs},on:{click:function(t){return e.$emit("addJeepayCard")}}},[s("div",{staticClass:"jeepay-card-add",style:{height:e.height+"px"}},[s("div",{staticClass:"jeepay-card-add-top"},[s("img",{staticClass:"jeepay-card-add-icon",attrs:{src:a("e8c7"),alt:"add-icon"}}),s("img",{staticClass:"jeepay-card-add-icon-hover",attrs:{src:a("e19e"),alt:"add-icon"}})]),s("div",{staticClass:"jeepay-card-add-text"},[e._v(" 新建"+e._s(e.name)+" ")])])]):e._e(),e._l(e.cardList,(function(t,a){return s("a-col",{key:a,attrs:{xxl:24/e.span.xxl,xl:24/e.span.xl,lg:24/e.span.lg,md:24/e.span.md,sm:24/e.span.sm,xs:24/e.span.xs}},[e._t("cardContentSlot",null,{record:t}),e._t("cardOpSlot",null,{record:t})],2)}))],2)],1)},o=[],i=(a("a9e3"),{name:"JeepayCard",props:{span:{type:Object,default:function(){return{xxl:6,xl:4,lg:4,md:3,sm:2,xs:1}}},height:{type:Number,default:200},name:{type:String,default:""},addAuthority:{type:Boolean,default:!1},reqCardListFunc:{type:Function,default:function(){return function(){return{}}}}},data:function(){return{cardList:[]}},created:function(){this.refCardList()},methods:{refCardList:function(){var e=this;this.reqCardListFunc().then((function(t){e.cardList=t}))}}}),r=i,l=(a("9d22"),a("2877")),n=Object(l["a"])(r,s,o,!1,null,"47ed671f",null);t["a"]=n.exports},c958:function(e,t,a){},db40:function(e,t,a){"use strict";a("18dc")},e19e:function(e,t,a){e.exports=a.p+"assets/add-icon-hover.50df40dd.svg"},e789:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"通道支付参数配置",width:"40%",closable:!0,maskClosable:!0,visible:e.visible,"body-style":{paddingBottom:"80px"}},on:{close:e.onClose}},[a("a-divider",{attrs:{orientation:"left"}},[a("a-tag",{attrs:{color:"#FF4B33"}},[e._v(" "+e._s(e.saveObject.ifCode)+" 商户参数配置 ")])],1),a("a-form-model",{ref:"mchParamFormModel",attrs:{model:e.ifParams,layout:"vertical",rules:e.ifParamsRules}},[a("a-row",{attrs:{gutter:16}},e._l(e.mchParams,(function(t,s){return a("a-col",{key:s,attrs:{span:"text"===t.type?12:24}},["text"===t.type||"textarea"===t.type?a("a-form-model-item",{attrs:{label:t.desc,prop:t.name}},[a("a-input",{attrs:{placeholder:"请输入",type:t.type},model:{value:e.ifParams[t.name],callback:function(a){e.$set(e.ifParams,t.name,a)},expression:"ifParams[item.name]"}})],1):"radio"===t.type?a("a-form-model-item",{attrs:{label:t.desc,prop:t.name}},[a("a-radio-group",{model:{value:e.ifParams[t.name],callback:function(a){e.$set(e.ifParams,t.name,a)},expression:"ifParams[item.name]"}},e._l(t.values,(function(t,s){return a("a-radio",{key:s,attrs:{value:t.value}},[e._v(" "+e._s(t.title)+" ")])})),1)],1):e._e()],1)})),1)],1),e.$access("ENT_MCH_PAY_PASSAGE_CONFIG")?a("div",{staticClass:"drawer-btn-center"},[a("a-button",{style:{marginRight:"8px"},attrs:{icon:"close"},on:{click:e.onClose}},[e._v("取消")]),a("a-button",{attrs:{type:"primary",icon:"check",loading:e.btnLoading},on:{click:e.onSubmit}},[e._v("保存")])],1):e._e()],1)},o=[],i=(a("159b"),a("ac1f"),a("1276"),a("d3b7"),a("ddb0"),a("a9e3"),a("b0c0"),a("b64b"),a("c73b")),r=a("909a"),l=a("0fea"),n={components:{JeepayCard:i["a"],JeepayUpload:r["a"]},props:{callbackFunc:{type:Function,default:function(){return{}}}},data:function(){return{btnLoading:!1,visible:!1,appId:null,ifCode:null,mchParams:{},saveObject:{},ifParams:{},rules:{infoId:[{required:!0,trigger:"blur"}],ifCode:[{required:!0,trigger:"blur"}]},ifParamsRules:{}}},methods:{show:function(e){void 0!==this.$refs.mchParamFormModel&&this.$refs.mchParamFormModel.resetFields();var t=this;t.saveObject=e,l["cb"].getById(l["e"],e.ifCode).then((function(a){void 0!==e.payInterfaceConfig?t.ifParams=JSON.parse(e.payInterfaceConfig):t.ifParams={};var s=[],o=[],i=a.ifParams;JSON.parse(i).forEach((function(e){if(o=[],"radio"===e.type){var t=e.values.split(","),a=e.titles.split(",");for(var i in t){var r=t[i];isNaN(r)||(r=Number(r)),o.push({value:r,title:a[i]})}}s.push({name:e.name,desc:e.desc,type:e.type,verify:e.verify,values:o})})),t.mchParams=s,t.visible=!0,t.generateRules()}))},onSubmit:function(){var e=this,t=this;this.$refs.mchParamFormModel.validate((function(a){if(a){if(t.btnLoading=!0,0===Object.keys(t.ifParams).length)return void e.$message.error("参数不能为空！");t.saveObject.payInterfaceConfig=JSON.stringify(t.ifParams),l["cb"].updateById(l["i"],t.saveObject.payPassageId,t.saveObject).then((function(e){t.$message.success("保存成功"),t.visible=!1,t.btnLoading=!1}))}}))},uploadSuccess:function(e,t){this.ifParams[t]=e,this.$forceUpdate()},generateRules:function(){var e={},t=[];this.mchParams.forEach((function(a){t=[],"required"===a.verify&&"1"!==a.star&&(t.push({required:!0,message:"请输入"+a.desc,trigger:"blur"}),e[a.name]=t)})),this.ifParamsRules=e},onClose:function(){this.visible=!1}}},c=n,d=(a("db40"),a("2877")),u=Object(d["a"])(c,s,o,!1,null,"65367e21",null);t["default"]=u.exports},e8c7:function(e,t,a){e.exports=a.p+"assets/add-icon.a2f73e90.svg"},fd66:function(e,t,a){}}]);