(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fce911be"],{"23dc":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("page-header-wrapper",[n("a-card",[n("div",{staticClass:"table-page-search-wrapper"},[e.$access("ENT_PC_WAY_SEARCH")?n("a-form",{staticClass:"table-head-ground",attrs:{layout:"inline"}},[n("div",{staticClass:"table-layer"},[n("jeepay-text-up",{attrs:{placeholder:"产品代码",msg:e.searchData.productId},model:{value:e.searchData.productId,callback:function(t){e.$set(e.searchData,"productId",t)},expression:"searchData.productId"}}),n("jeepay-text-up",{attrs:{placeholder:"产品名称",msg:e.searchData.productName},model:{value:e.searchData.productName,callback:function(t){e.$set(e.searchData,"productName",t)},expression:"searchData.productName"}}),n("a-form-item",{staticClass:"table-head-layout",attrs:{label:""}},[n("a-select",{attrs:{placeholder:"产品状态","default-value":""},model:{value:e.searchData.state,callback:function(t){e.$set(e.searchData,"state",t)},expression:"searchData.state"}},[n("a-select-option",{attrs:{value:""}},[e._v("全部")]),n("a-select-option",{attrs:{value:"0"}},[e._v("禁用")]),n("a-select-option",{attrs:{value:"1"}},[e._v("启用")])],1)],1),n("a-form-item",{staticClass:"table-head-layout",attrs:{label:""}},[n("a-select",{attrs:{placeholder:"成本限制状态","default-value":""},model:{value:e.searchData.limitState,callback:function(t){e.$set(e.searchData,"limitState",t)},expression:"searchData.limitState"}},[n("a-select-option",{attrs:{value:""}},[e._v("全部")]),n("a-select-option",{attrs:{value:"0"}},[e._v("禁用")]),n("a-select-option",{attrs:{value:"1"}},[e._v("启用")])],1)],1),n("span",{staticClass:"table-page-search-submitButtons"},[n("a-button",{attrs:{type:"primary",icon:"search",loading:e.btnLoading},on:{click:function(t){return e.searchFunc(!0)}}},[e._v("查询")]),n("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"reload"},on:{click:function(){return t.searchData={}}}},[e._v("重置")])],1)],1)]):e._e(),e.$access("ENT_PC_WAY_ADD")?n("a-button",{staticClass:"mg-b-30",attrs:{type:"primary",icon:"plus"},on:{click:e.addFunc}},[e._v("新建")]):e._e()],1),n("JeepayTable",{ref:"infoTable",attrs:{initData:!0,reqTableDataFunc:e.reqTableDataFunc,tableColumns:e.tableColumns,searchData:e.searchData,rowKey:"productId"},on:{btnLoadClose:function(t){e.btnLoading=!1}},scopedSlots:e._u([{key:"wayCodeSlot",fn:function(t){var a=t.record;return[n("b",[e._v(e._s(a.productId))])]}},{key:"stateSlot",fn:function(t){var a=t.record;return[n("JeepayTableColState",{attrs:{state:a.state,showSwitchType:!0,onChange:function(t){return e.onStateSwitchChange(a.productId,t)}}})]}},{key:"limitStateSlot",fn:function(t){var a=t.record;return[n("JeepayTableColState",{attrs:{state:a.limitState,showSwitchType:!0,onChange:function(t){return e.onLimitStateSwitchChange(a.productId,t)}}})]}},{key:"opSlot",fn:function(t){var a=t.record;return[n("JeepayTableColumns",[e.$access("ENT_PC_WAY_EDIT")?n("a",{on:{click:function(t){return e.editFunc(a.productId)}}},[e._v("修改")]):e._e(),e.$access("ENT_PC_WAY_EDIT")?n("a",{on:{click:function(t){return e.editMchRateFunc(a)}}},[e._v("费率配置")]):e._e(),e.$access("ENT_PC_WAY_DEL")?n("a",{staticStyle:{color:"red"},on:{click:function(t){return e.delFunc(a.productId)}}},[e._v("删除")]):e._e()])]}}])})],1),n("InfoAddOrEdit",{ref:"infoAddOrEdit",attrs:{callbackFunc:e.searchFunc}}),n("ProductMchEdit",{ref:"productMchEdit",attrs:{callbackFunc:e.searchFunc}})],1)},c=[],s=(a("d3b7"),a("f339")),o=a("5d5e"),r=a("0fea"),i=a("a301"),u=a("4f53"),l=a("906c"),d=a("c22a"),h=[{key:"productId",fixed:"left",title:"产品代码",width:"120px",scopedSlots:{customRender:"wayCodeSlot"}},{key:"productName",title:"产品名称",dataIndex:"productName"},{key:"state",title:"产品状态",scopedSlots:{customRender:"stateSlot"}},{key:"limitState",title:"高于成本拉起",scopedSlots:{customRender:"limitStateSlot"}},{key:"createdAt",title:"创建时间",dataIndex:"createdAt"},{key:"op",title:"操作",width:"200px",fixed:"right",align:"center",scopedSlots:{customRender:"opSlot"}}],f={name:"PayWayPage",components:{JeepayTableColState:d["a"],JeepayTable:s["a"],JeepayTableColumns:o["a"],InfoAddOrEdit:i["default"],JeepayTextUp:u["a"],ProductMchEdit:l["default"]},data:function(){return{tableColumns:h,searchData:{},btnLoading:!1}},methods:{reqTableDataFunc:function(t){return r["cb"].list(r["D"],t)},searchFunc:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.btnLoading=!0,this.$refs.infoTable.refTable(t)},addFunc:function(){this.$refs.infoAddOrEdit.show()},editFunc:function(t){this.$refs.infoAddOrEdit.show(t)},editMchRateFunc:function(t){this.$refs.productMchEdit.show(t)},delFunc:function(t){var e=this;this.$infoBox.confirmDanger("确认删除？","",(function(){r["cb"].delById(r["D"],t).then((function(t){e.$message.success("删除成功！"),e.$refs.infoTable.refTable(!1)}))}))},onStateSwitchChange:function(t,e){var a=this,n=1===e?"确认[启用]该产品？":"确认[停用]该产品？",c="",s={state:e};return new Promise((function(e,o){a.$infoBox.confirmDanger(n,c,(function(){return r["cb"].updateById(r["D"],t,s).then((function(t){a.$message.success("修改成功"),a.searchFunc(),e()})).catch((function(t){return o(t)}))}),(function(){o(new Error)}))}))},onLimitStateSwitchChange:function(t,e){var a=this,n=1===e?"确认[启用]高于成本拉起？":"确认[停用]高于成本拉起？",c=1===e?"此设置为防止费率配置错误，启用后允许拉起成本价高于收益的产品下通道，打开限制需谨慎！":"停用后无法拉起成本价高于收益的产品下通道",s={limitState:e};return new Promise((function(e,o){a.$infoBox.confirmDanger(n,c,(function(){return r["cb"].updateById(r["D"],t,s).then((function(t){a.$message.success("修改成功"),a.searchFunc(),e()})).catch((function(t){return o(t)}))}),(function(){o(new Error)}))}))}}},p=f,b=a("2877"),m=Object(b["a"])(p,n,c,!1,null,null,null);e["default"]=m.exports},a301:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:t.isAdd?"新增产品":"修改产品"},on:{ok:t.handleOkFunc},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[a("a-form-model",{ref:"infoFormModel",attrs:{model:t.saveObject,"label-col":{span:6},"wrapper-col":{span:15},rules:t.rules}},[a("a-form-model-item",{attrs:{label:"产品代码：",prop:"productId"}},[a("a-input",{attrs:{disabled:!t.isAdd},model:{value:t.saveObject.productId,callback:function(e){t.$set(t.saveObject,"productId",e)},expression:"saveObject.productId"}})],1),a("a-form-model-item",{attrs:{label:"产品名称：",prop:"productName"}},[a("a-input",{model:{value:t.saveObject.productName,callback:function(e){t.$set(t.saveObject,"productName",e)},expression:"saveObject.productName"}})],1)],1)],1)},c=[],s=a("0fea"),o={props:{callbackFunc:{type:Function,default:function(){return function(){return{}}}}},data:function(){return{isAdd:!0,isShow:!1,saveObject:{},wayCode:null,rules:{productId:[{required:!0,message:"请输入产品代码(纯数字1-8位，首位不为0)",pattern:/^[1-9]\d{0,7}$/,trigger:"blur"}],productName:[{required:!0,message:"请输入产品名称",trigger:"blur"}]}}},methods:{show:function(t){this.isAdd=!t,this.saveObject={},void 0!==this.$refs.infoFormModel&&this.$refs.infoFormModel.resetFields();var e=this;this.isAdd?e.isShow=!0:(e.wayCode=t,s["cb"].getById(s["D"],t).then((function(t){e.saveObject=t})),this.isShow=!0)},handleOkFunc:function(){var t=this;this.$refs.infoFormModel.validate((function(e){e&&(t.isShow=!1,t.isAdd?s["cb"].add(s["D"],t.saveObject).then((function(e){t.$message.success("新增成功"),t.callbackFunc()})):s["cb"].updateById(s["D"],t.wayCode,t.saveObject).then((function(e){t.$message.success("修改成功"),t.callbackFunc()})))}))}}},r=o,i=a("2877"),u=Object(i["a"])(r,n,c,!1,null,null,null);e["default"]=u.exports},c22a:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showSwitchType?t._e():[0==t.state?a("div",[a("a-badge",{attrs:{status:"error",text:"停用"}})],1):1==t.state?a("div",[a("a-badge",{attrs:{status:"processing",text:"启用"}})],1):a("div",[a("a-badge",{attrs:{status:"warning",text:"未知"}})],1)],t.showSwitchType?[a("a-switch",{staticClass:"els",attrs:{"checked-children":"启用","un-checked-children":"停用",checked:t.switchChecked},on:{change:t.onChangeInner}})]:t._e()],2)},c=[],s=(a("a9e3"),a("d3b7"),{name:"JeepayTableColState",props:{state:{type:Number,default:-1},showSwitchType:{type:Boolean,default:!1},onChange:{type:Function,default:function(t){return new Promise((function(t){t()}))}}},data:function(){return{switchChecked:!1}},mounted:function(){this.switchChecked=1===this.state},watch:{state:function(t,e){this.switchChecked=1===this.state}},methods:{onChangeInner:function(t){var e=this;this.switchChecked=t,this.onChange(t?1:0).then().catch((function(a){e.$nextTick((function(){e.switchChecked=!t}))}))}}}),o=s,r=a("2877"),i=Object(r["a"])(o,n,c,!1,null,null,null);e["a"]=i.exports}}]);