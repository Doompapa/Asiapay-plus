(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fe3b9534"],{"0fea":function(e,t,a){"use strict";a.d(t,"cb",(function(){return n})),a.d(t,"db",(function(){return s})),a.d(t,"d",(function(){return u})),a.d(t,"K",(function(){return i})),a.d(t,"J",(function(){return o})),a.d(t,"N",(function(){return c})),a.d(t,"P",(function(){return l})),a.d(t,"h",(function(){return d})),a.d(t,"f",(function(){return p})),a.d(t,"g",(function(){return f})),a.d(t,"r",(function(){return m})),a.d(t,"o",(function(){return b})),a.d(t,"y",(function(){return v})),a.d(t,"C",(function(){return h})),a.d(t,"c",(function(){return y})),a.d(t,"v",(function(){return g})),a.d(t,"H",(function(){return O})),a.d(t,"u",(function(){return j})),a.d(t,"Q",(function(){return N})),a.d(t,"B",(function(){return T})),a.d(t,"q",(function(){return q})),a.d(t,"i",(function(){return I})),a.d(t,"l",(function(){return R})),a.d(t,"k",(function(){return S})),a.d(t,"j",(function(){return C})),a.d(t,"n",(function(){return k})),a.d(t,"m",(function(){return P})),a.d(t,"F",(function(){return E})),a.d(t,"E",(function(){return A})),a.d(t,"I",(function(){return w})),a.d(t,"s",(function(){return $})),a.d(t,"t",(function(){return x})),a.d(t,"M",(function(){return _})),a.d(t,"L",(function(){return F})),a.d(t,"e",(function(){return D})),a.d(t,"D",(function(){return G})),a.d(t,"p",(function(){return L})),a.d(t,"a",(function(){return U})),a.d(t,"O",(function(){return M})),a.d(t,"G",(function(){return z})),a.d(t,"x",(function(){return H})),a.d(t,"w",(function(){return J})),a.d(t,"z",(function(){return K})),a.d(t,"A",(function(){return W})),a.d(t,"b",(function(){return Q})),a.d(t,"hb",(function(){return V})),a.d(t,"U",(function(){return X})),a.d(t,"bb",(function(){return Y})),a.d(t,"eb",(function(){return Z})),a.d(t,"X",(function(){return ee})),a.d(t,"W",(function(){return te})),a.d(t,"gb",(function(){return ae})),a.d(t,"fb",(function(){return re})),a.d(t,"Y",(function(){return ne})),a.d(t,"V",(function(){return se})),a.d(t,"S",(function(){return ue})),a.d(t,"T",(function(){return ie})),a.d(t,"Z",(function(){return oe})),a.d(t,"ab",(function(){return ce})),a.d(t,"R",(function(){return le}));var r=a("4667"),n={list:function(e,t){return r["a"].request({url:e,method:"GET",params:t},!0,!0,!1)},add:function(e,t){return r["a"].request({url:e,method:"POST",data:t},!0,!0,!1)},getById:function(e,t){return r["a"].request({url:e+"/"+t,method:"GET"},!0,!0,!1)},updateById:function(e,t,a){return r["a"].request({url:e+"/"+t,method:"PUT",data:a},!0,!0,!1)},delById:function(e,t){return r["a"].request({url:e+"/"+t,method:"DELETE"},!0,!0,!1)},postNormal:function(e,t){return r["a"].request({url:e+"/"+t,method:"POST"},!0,!0,!0)},postDataNormal:function(e,t,a){return r["a"].request({url:e+"/"+t,method:"POST",data:a},!0,!0,!0)},getNormal:function(e,t){return r["a"].request({url:e+"/"+t,method:"GET"},!0,!0,!0)}},s={list:function(e,t){return r["a"].request({url:e,method:"GET",params:t},!0,!0,!0)},add:function(e,t){return r["a"].request({url:e,method:"POST",data:t},!0,!0,!0)},getById:function(e,t){return r["a"].request({url:e+"/"+t,method:"GET"},!0,!0,!0)},updateById:function(e,t,a){return r["a"].request({url:e+"/"+t,method:"PUT",data:a},!0,!0,!0)},delById:function(e,t){return r["a"].request({url:e+"/"+t,method:"DELETE"},!0,!0,!0)}},u="/api/sysEnts",i="/api/sysRoles",o="/api/sysRoleEntRelas",c="/api/sysUsers",l="/api/sysUserRoleRelas",d="/api/isvInfo",p="/api/isvBalance",f="/api/agentHistory",m="/api/mchInfo",b="/api/mchBalance",v="/api/mchStatInfo",h="/api/passageStatInfo",y="/api/agentStatInfo",g="/api/mchProductInfo",O="/api/productMchInfo",j="/api/mchPassageInfo",N="/api/payOrder",T="/api/passageMchInfo",q="/api/mchHistory",I="/api/mchApps",R="/api/mchAppsList",S="/api/passageHistory",C="/api/mchAppsBalance",k="/api/mchAppsBalanceReset",P="/api/mchAppsMultipleSet",E="/api/payOrder",A="/api/payOrderForceList",w="/api/refundOrder",$="/api/mchNotify",x="/api/mchNotifyResend/resendAll",_="api/sysLog",F="api/sysConfigs",B="api/mainChart",D="/api/payIfDefines",G="/api/payWays",L="/api/mchDivision",U="/api/agentDivision",M="/api/transferOrders",z="/api/platStat",H="/api/mchStat",J="/api/mchProductStat",K="/api/passageStat",W="/api/productStat",Q="/api/agentStat",V={avatar:r["a"].baseUrl+"/api/ossFiles/avatar",ifBG:r["a"].baseUrl+"/api/ossFiles/ifBG",cert:r["a"].baseUrl+"/api/ossFiles/cert"};function X(e){return r["a"].request({url:"/api/sysEnts/showTree?sysType="+e,method:"GET"})}function Y(e,t,a){return r["a"].request({url:"/api/payOrder/refunds/"+e,method:"POST",data:{refundAmount:t,refundReason:a}})}function Z(e,t){return r["a"].request({url:"api/sysUserRoleRelas/relas/"+e,method:"POST",data:{roleIdListStr:JSON.stringify(t)}})}function ee(){return r["a"].request({url:B+"/twoDayCount",method:"GET"})}function te(){return r["a"].request({url:B+"/realTimeCount",method:"GET"})}function ae(e){return r["a"].request({url:"/api/current/modifyPwd",method:"put",data:e})}function re(e){return r["a"].request({url:"/api/current/user",method:"put",data:e})}function ne(){return r["a"].request({url:"/api/current/user",method:"get"})}function se(){return r["a"].request({url:"/api/current/getGoogleKey",method:"get"})}function ue(e){return r["a"].request({url:F+"/"+e,method:"GET"})}function ie(e,t){return r["a"].request({url:"/api/sysEnts/bySysType",method:"GET",params:{entId:e,sysType:t}})}function oe(e){return r["a"].request({url:"/api/mchNotify/resend/"+e,method:"POST"})}function ce(e){return r["a"].request({url:"/api/passageTest/doPay",method:"POST",data:e})}function le(e,t){return r["a"].request({url:e,method:"POST",data:t,responseType:"arraybuffer"},!0,!1,!0)}},5071:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{visible:e.visible,title:e.isAdd?"新增通道":"修改通道",width:"40%",maskClosable:!0},on:{close:e.onClose}},[a("a-form-model",{ref:"infoFormModel",attrs:{model:e.saveObject,layout:"vertical",rules:e.rules}},[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"通道名称",prop:"payPassageName"}},[a("a-input",{attrs:{placeholder:"请输入"},model:{value:e.saveObject.payPassageName,callback:function(t){e.$set(e.saveObject,"payPassageName",t)},expression:"saveObject.payPassageName"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{staticClass:"table-head-layout",attrs:{label:""}},[a("a-select",{attrs:{allowClear:!0,placeholder:"对应产品","show-search":"","option-filter-prop":"children"},model:{value:e.saveObject.productId,callback:function(t){e.$set(e.saveObject,"productId",t)},expression:"saveObject.productId"}},e._l(e.productList,(function(t){return a("a-select-option",{key:t.productId,attrs:{value:t.productId}},[e._v(" "+e._s(t.productName+" [ ID: "+t.productId+" ]")+" ")])})),1)],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"所属支付接口",prop:"ifCode"}},[a("a-select",{attrs:{placeholder:"请选择对应支付接口",allowClear:!0,"show-search":"","option-filter-prop":"children"},model:{value:e.saveObject.ifCode,callback:function(t){e.$set(e.saveObject,"ifCode",t)},expression:"saveObject.ifCode"}},e._l(e.payDefines,(function(t){return a("a-select-option",{key:t.ifCode,attrs:{value:t.ifCode}},[e._v(" "+e._s(t.ifName+" [ 接口代码: "+t.ifCode+" ]")+" ")])})),1)],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"收款方式",prop:"payType"}},[a("a-select",{attrs:{placeholder:"请选择收款方式"},model:{value:e.saveObject.payType,callback:function(t){e.$set(e.saveObject,"payType",t)},expression:"saveObject.payType"}},[a("a-select-option",{key:1,attrs:{value:1}},[e._v("区间范围 "),a("span",{staticStyle:{color:"#8C8C8C","font-size":"12px"}},[e._v("[例如:10-50000]")])]),a("a-select-option",{key:2,attrs:{value:2}},[e._v("固定金额 "),a("span",{staticStyle:{color:"#8C8C8C","font-size":"12px"}},[e._v("[例如:100|200|300]")])])],1)],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"收款规则",prop:"payRules"}},[a("a-input",{attrs:{placeholder:e.saveObject.payRules,type:"textarea"},model:{value:e.saveObject.payRules,callback:function(t){e.$set(e.saveObject,"payRules",t)},expression:"saveObject.payRules"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"通道费率"}},[a("a-input",{attrs:{prefix:"%",placeholder:"请输入",type:"number"},model:{value:e.rate,callback:function(t){e.rate=t},expression:"rate"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"代理商户号"}},[a("a-select",{attrs:{placeholder:"请选择代理商",allowClear:!0,"default-value":""},model:{value:e.saveObject.agentNo,callback:function(t){e.$set(e.saveObject,"agentNo",t)},expression:"saveObject.agentNo"}},e._l(e.isvList,(function(t){return a("a-select-option",{key:t.agentNo,attrs:{value:t.agentNo}},[e._v(" "+e._s(t.agentName+" [ ID: "+t.agentNo+" ]")+" ")])})),1)],1)],1),null!=e.saveObject.agentNo&&""!=e.saveObject.agentNo?a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"代理费率"}},[a("a-input",{attrs:{prefix:"%",placeholder:"请输入",type:"number"},model:{value:e.lastAgentRate,callback:function(t){e.lastAgentRate=t},expression:"lastAgentRate"}})],1)],1):e._e()],1)],1),a("div",{staticClass:"drawer-btn-center"},[a("a-button",{style:{marginRight:"8px"},attrs:{icon:"close"},on:{click:e.onClose}},[e._v("取消")]),a("a-button",{attrs:{type:"primary",icon:"check"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)},n=[],s=(a("b680"),a("ac1f"),a("1276"),a("a9e3"),a("0fea")),u={props:{callbackFunc:{type:Function,default:function(){return function(){return{}}}}},data:function(){return{isAdd:!0,visible:!1,passageId:"",saveObject:{},rules:{payRules:[{required:!0,message:"请输入收款规则",trigger:"blur"}],payType:[{required:!0,message:"选择收款规则",trigger:"blur"}],productId:[{required:!0,message:"选择支付产品",trigger:"blur"}],ifCode:[{required:!0,message:"选择支付接口",trigger:"blur"}],payPassageName:[{required:!0,message:"请输入支付通道名称",trigger:"blur"}]},lastAgentRate:0,rate:0,productList:{},payDefines:{},isvList:null}},methods:{show:function(e){this.isAdd=!e,this.saveObject={},this.isAdd&&(this.lastAgentRate=0,this.rate=0,this.saveObject={state:1}),s["cb"].list(s["h"],{pageSize:-1}).then((function(e){t.isvList=e.records})),s["cb"].list(s["D"],{pageSize:-1}).then((function(e){t.productList=e.records})),s["cb"].list(s["e"],{pageSize:-1}).then((function(e){t.payDefines=e})),void 0!==this.$refs.infoFormModel&&this.$refs.infoFormModel.resetFields();var t=this;this.isAdd?t.visible=!0:(t.passageId=e,s["cb"].getById(s["i"],e).then((function(e){t.saveObject=e,t.lastAgentRate=(100*t.saveObject.agentRate).toFixed(2),t.rate=(100*t.saveObject.rate).toFixed(2)})),this.visible=!0)},onSubmit:function(){var e=this,t=this;this.$refs.infoFormModel.validate((function(a){if(a){if(1===t.saveObject.payType){var r=t.saveObject.payRules.split("-");if(2!==r.length)return void t.$message.error("收款规则格式错误,例如:10-50000");var n=Number(r[0]),u=Number(r[1]);if("number"!==typeof n||isNaN(n)||"number"!==typeof u||isNaN(u))return void t.$message.error("收款规则格式错误,例如:10-50000");if(n>u)return void t.$message.error("收款规则范围错误,例如:10-50000")}else{var i=t.saveObject.payRules.split("|");if(null==i||0===i.length){var o=Number(i);if("number"!==typeof o||isNaN(o))return void t.$message.error("收款规则格式错误,例如:100|200|300")}for(var c=0;c<i.length;c++){var l=Number(i[c]);if("number"!==typeof l||isNaN(l))return void t.$message.error("收款规则格式错误,例如:100|200|300")}}var d=/^\d+(?:\.\d+)?$/;d.test(e.rate)||t.$message.error("费率格式错误"),e.saveObject.agentRate=e.lastAgentRate/100,null!=e.saveObject.agentNo&&void 0!==e.saveObject.agentNo||(e.saveObject.agentNo="",e.saveObject.agentRate=0),e.saveObject.rate=e.rate/100,t.isAdd?s["cb"].add(s["i"],t.saveObject).then((function(e){t.$message.success("新增成功"),t.visible=!1,t.callbackFunc()})):(0===t.saveObject.state&&(t.saveObject.timeLimit=0),s["cb"].updateById(s["i"],t.saveObject.payPassageId,t.saveObject).then((function(e){t.$message.success("修改成功"),t.visible=!1,t.callbackFunc(!0)})))}}))},onClose:function(){this.visible=!1}}},i=u,o=a("2877"),c=Object(o["a"])(i,r,n,!1,null,"886f656a",null);t["default"]=c.exports}}]);