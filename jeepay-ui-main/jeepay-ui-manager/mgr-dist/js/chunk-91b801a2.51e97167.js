(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-91b801a2"],{"9c3e":function(t,a,e){},"9e94":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("page-header-wrapper",[s("a-card",[s("div",{staticClass:"table-page-search-wrapper"},[s("a-form",{staticClass:"table-head-ground",attrs:{layout:"inline"}},[s("div",{staticClass:"table-layer"},[s("a-form-item",{staticClass:"table-head-layout",staticStyle:{"max-width":"350px","min-width":"300px"},attrs:{label:""}},[s("a-range-picker",{attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss","disabled-date":t.disabledDate,ranges:t.ranges},on:{change:t.onChange},model:{value:t.selectedRange,callback:function(a){t.selectedRange=a},expression:"selectedRange"}},[s("a-icon",{attrs:{slot:"suffixIcon",type:"sync"},slot:"suffixIcon"})],1)],1),s("jeepay-text-up",{attrs:{placeholder:"支付订单号",msg:t.searchData.payOrderId},model:{value:t.searchData.payOrderId,callback:function(a){t.$set(t.searchData,"payOrderId",a)},expression:"searchData.payOrderId"}}),s("jeepay-text-up",{attrs:{placeholder:"商户订单号",msg:t.searchData.mchOrderNo},model:{value:t.searchData.mchOrderNo,callback:function(a){t.$set(t.searchData,"mchOrderNo",a)},expression:"searchData.mchOrderNo"}}),s("jeepay-text-up",{attrs:{placeholder:"通道订单号",msg:t.searchData.passageOrderNo},model:{value:t.searchData.passageOrderNo,callback:function(a){t.$set(t.searchData,"passageOrderNo",a)},expression:"searchData.passageOrderNo"}}),s("jeepay-text-up",{attrs:{placeholder:"商户号",msg:t.searchData.mchNo},model:{value:t.searchData.mchNo,callback:function(a){t.$set(t.searchData,"mchNo",a)},expression:"searchData.mchNo"}}),s("jeepay-text-up",{attrs:{placeholder:"通道ID",msg:t.searchData.passageId},model:{value:t.searchData.passageId,callback:function(a){t.$set(t.searchData,"passageId",a)},expression:"searchData.passageId"}}),s("span",{staticClass:"table-page-search-submitButtons"},[s("a-button",{attrs:{type:"primary",icon:"search",loading:t.btnLoading},on:{click:t.queryFunc}},[t._v("搜索")]),s("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"reload"},on:{click:t.resetSearch}},[t._v("重置")])],1)],1)])],1),s("div",{staticStyle:{"background-color":"#fafafa","padding-top":"10px","padding-bottom":"10px","border-bottom":"1px solid rgba(179,179,179,0.4)"}},[s("a-row",{staticStyle:{"padding-left":"15px","padding-right":"15px"}},[s("a-col",{staticClass:"stat-col bg-color-1",attrs:{span:4}},[s("span",{staticClass:"title"},[t._v("订单金额")]),s("b",{staticStyle:{color:"#DB4B4B"}},[t._v(t._s((t.realTimeStatData.successAmount/100).toFixed(2)))]),s("span",{staticClass:"sub-content"},[t._v("总："+t._s((t.realTimeStatData.totalAmount/100).toFixed(2)))]),s("img",{attrs:{src:e("8035")}})]),s("a-col",{staticClass:"stat-col bg-color-2",attrs:{span:4,offset:1}},[s("span",{staticClass:"title"},[t._v("订单数")]),s("b",{staticStyle:{color:"#FA9D2A"}},[t._v(t._s(t.realTimeStatData.successCount))]),s("span",{staticClass:"sub-content"},[t._v("总："+t._s(t.realTimeStatData.totalCount))]),s("img",{attrs:{src:e("cd32")}})]),s("a-col",{staticClass:"stat-col bg-color-3",attrs:{span:4,offset:1}},[s("span",{staticClass:"title"},[t._v("商户入账")]),s("b",{staticStyle:{color:"#2F61DC"}},[t._v(t._s((t.realTimeStatData.totalMchIncome/100).toFixed(2)))]),s("img",{attrs:{src:e("a23f")}})]),s("a-col",{staticClass:"stat-col bg-color-4",attrs:{span:4,offset:1}},[s("span",{staticClass:"title"},[t._v("平台利润")]),s("b",{staticStyle:{color:"#864FE1"}},[t._v(t._s((t.realTimeStatData.totalIncome/100).toFixed(2)))]),s("img",{attrs:{src:e("e2aa")}})]),s("a-col",{staticClass:"stat-col bg-color-5",attrs:{span:4,offset:1}},[s("span",{staticClass:"title"},[t._v("成功率")]),s("b",{staticStyle:{color:"#4BD884"}},[t._v(t._s((0===t.realTimeStatData.successCount?0:t.realTimeStatData.successCount/t.realTimeStatData.totalCount*100).toFixed(2))+"%")]),s("img",{attrs:{src:e("3d74")}})])],1)],1),s("JeepayTable",{ref:"infoTable",attrs:{initData:!1,reqTableDataFunc:t.reqTableDataFunc,tableColumns:t.tableColumns,searchData:t.searchData,pageSize:50,rowKey:"payOrderId"},on:{btnLoadClose:function(a){t.btnLoading=!1}},scopedSlots:t._u([{key:"mchSlot",fn:function(a){var e=a.record;return[s("div",{staticClass:"mch-name"},[s("p",[s("span",{staticStyle:{color:"#007EFF","font-size":"14px"}},[t._v(t._s(e.mchNo))])]),s("p",{staticStyle:{"margin-bottom":"0"}},[s("span",{staticStyle:{"font-size":"16px","text-align":"left"}},[t._v(t._s(e.mchName))])])])]}},{key:"amountSlot",fn:function(a){var e=a.record;return[s("b",[t._v("￥"+t._s(e.amount/100))])]}},{key:"beforeStateSlot",fn:function(a){var e=a.record;return[s("a-tag",{key:e.forceChangeBeforeState,attrs:{color:0===e.forceChangeBeforeState?"blue":1===e.forceChangeBeforeState?"orange":2===e.forceChangeBeforeState?"#4BD884":6===e.forceChangeBeforeState?"":"#F03B44"}},[t._v(" "+t._s(0===e.forceChangeBeforeState?"订单生成":1===e.forceChangeBeforeState?"支付中":2===e.forceChangeBeforeState?"支付成功":3===e.forceChangeBeforeState?"支付失败":4===e.forceChangeBeforeState?"已撤销":5===e.forceChangeBeforeState?"测试冲正":6===e.forceChangeBeforeState?"订单关闭":"未知")+" ")])]}},{key:"stateSlot",fn:function(a){var e=a.record;return[s("a-tag",{key:e.state,attrs:{color:0===e.state?"blue":1===e.state?"orange":2===e.state?"#4BD884":6===e.state?"":"#F03B44"}},[t._v(" "+t._s(0===e.state?"订单生成":1===e.state?"支付中":2===e.state?"支付成功":3===e.state?"支付失败":4===e.state?"已撤销":5===e.state?"测试冲正":6===e.state?"订单关闭":"未知")+" ")])]}},{key:"forceChangeStateSlot",fn:function(a){var e=a.record;return[s("a-tag",{attrs:{color:void 0!=e.forceChangeState&&1===e.forceChangeState?"#007EFF":""}},[t._v(" "+t._s(void 0!=e.forceChangeState&&1===e.forceChangeState?"是":"否")+" ")])]}},{key:"forceChangeNameSlot",fn:function(a){var e=a.record;return[s("a-tag",{attrs:{color:"blue"}},[t._v(" "+t._s(e.forceChangeLoginName)+" ")])]}},{key:"passageSlot",fn:function(a){var e=a.record;return[s("span",{staticStyle:{color:"#1A79FF"}},[t._v("["+t._s(e.passageId)+"]")]),t._v(" "),s("span",[t._v(t._s(e.passageName))])]}},{key:"notifySlot",fn:function(t){var a=t.record;return[s("a-badge",{attrs:{status:1===a.notifyState?"processing":"error",text:1===a.notifyState?"已发送":"未发送"}})]}},{key:"productSlot",fn:function(a){var e=a.record;return[s("span",{staticStyle:{color:"#1A79FF"}},[t._v("["+t._s(e.productId)+"]")]),s("span",[t._v(t._s(e.productName))])]}},{key:"orderSlot",fn:function(a){var e=a.record;return[s("div",{staticClass:"order-list"},[s("p",[s("span",{staticStyle:{color:"#007EFF",background:"#DFEFFF"}},[t._v("支付单号")]),s("b",[t._v(t._s(e.payOrderId))])]),s("p",{staticStyle:{"margin-bottom":"0"}},[s("span",{staticStyle:{color:"#FA9D2A",background:"#FFEDD6"}},[t._v("商户单号")]),e.mchOrderNo.length>e.payOrderId.length?s("a-tooltip",{staticStyle:{"font-weight":"normal"},attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",[t._v(t._s(e.mchOrderNo))])]),t._v(" "+t._s(t.changeStr2ellipsis(e.mchOrderNo,e.payOrderId.length))+" ")],2):s("span",{staticStyle:{"font-weight":"normal"}},[t._v(t._s(e.mchOrderNo))])],1)])]}},{key:"opSlot",fn:function(a){var e=a.record;return[s("JeepayTableColumns",[t.$access("ENT_PAY_ORDER_VIEW")?s("a-button",{attrs:{type:"link"},on:{click:function(a){return t.detailFunc(e.payOrderId)}}},[t._v("查看详情")]):t._e()],1)]}}])})],1),[s("a-drawer",{attrs:{width:"50%",placement:"right",closable:!0,visible:t.visible,title:!0===t.visible?"订单详情":""},on:{close:t.onClose}},[s("a-row",{attrs:{justify:"space-between",type:"flex"}},[s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"商户号"}},[s("b",[t._v(t._s(t.detailData.mchNo))])])],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"商户名称"}},[t._v(" "+t._s(t.detailData.mchName)+" ")])],1)],1),s("a-col",{attrs:{sm:24}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"支付订单号"}},[s("a-tag",{attrs:{color:"purple"}},[t._v(" "+t._s(t.detailData.payOrderId)+" ")])],1)],1)],1),s("a-col",{attrs:{sm:24}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"商户订单号"}},[t._v(" "+t._s(t.detailData.mchOrderNo)+" ")])],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"支付金额"}},[s("a-tag",{attrs:{color:"green"}},[t._v(" "+t._s(t.detailData.amount/100)+" ")])],1)],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"订单状态"}},[s("a-tag",{attrs:{color:0===t.detailData.state?"blue":1===t.detailData.state?"orange":2===t.detailData.state?"#4BD884":6===t.detailData.state?"":"#F03B44"}},[t._v(" "+t._s(0===t.detailData.state?"订单生成":1===t.detailData.state?"支付中":2===t.detailData.state?"支付成功":3===t.detailData.state?"支付失败":4===t.detailData.state?"已撤销":5===t.detailData.state?"测试冲正":6===t.detailData.state?"订单关闭":"未知")+" ")])],1)],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"回调状态"}},[s("a-tag",{attrs:{color:1===t.detailData.notifyState?"#4BD884":"#F03B44"}},[t._v(" "+t._s(0===t.detailData.notifyState?"未发送":1===t.detailData.notifyState?"已发送":"未知")+" ")])],1)],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"支付产品"}},[t._v(" ["+t._s(t.detailData.productId)+"] "+t._s(t.detailData.productName)+" ")])],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"创建时间"}},[t._v(" "+t._s(t.detailData.createdAt)+" ")])],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"更新时间"}},[t._v(" "+t._s(t.detailData.updatedAt)+" ")])],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"订单失效时间"}},[t._v(" "+t._s(t.detailData.expiredTime)+" ")])],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"支付成功时间"}},[t._v(" "+t._s(t.detailData.successTime)+" ")])],1)],1),s("a-divider"),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"商户代理"}},[t._v(" "+t._s(""==t.detailData.agentNo?"无":t.detailData.agentNo)+" ")])],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"支付通道代理"}},[t._v(" "+t._s(""==t.detailData.agentNoPassage?"无":t.detailData.agentNoPassage)+" ")])],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"商户费率"}},[s("b",[t._v(t._s((100*t.detailData.mchFeeRate).toFixed(2))+"%")])])],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"商户手续费"}},[s("a-tag",{attrs:{color:"pink"}},[t._v(t._s(t.detailData.mchFeeAmount/100))])],1)],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"商户代理费率"}},[s("b",[t._v(t._s((100*t.detailData.agentRate).toFixed(2))+"%")])])],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"商户代理手续费"}},[s("a-tag",{attrs:{color:"pink"}},[t._v(t._s(t.detailData.agentFeeAmount/100))])],1)],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"通道费率"}},[s("b",[t._v(t._s((100*t.detailData.passageRate).toFixed(2))+"%")])])],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"通道手续费"}},[s("a-tag",{attrs:{color:"pink"}},[t._v(t._s(t.detailData.passageFeeAmount/100))])],1)],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"通道代理费率"}},[s("b",[t._v(t._s((100*t.detailData.agentPassageRate).toFixed(2))+"%")])])],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"通道代理手续费"}},[s("a-tag",{attrs:{color:"pink"}},[t._v(t._s(t.detailData.agentPassageFee/100))])],1)],1)],1),s("a-col",{attrs:{sm:24}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"平台利润"}},[s("a-tag",{attrs:{color:"blue"}},[t._v(t._s(((t.detailData.mchFeeAmount-t.detailData.agentFeeAmount-t.detailData.passageFeeAmount-t.detailData.agentPassageFee)/100).toFixed(2)))])],1)],1)],1),s("a-divider"),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"补单操作员"}},[s("b",[t._v(t._s(t.detailData.forceChangeLoginName))])])],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"补单前状态"}},[s("a-tag",{attrs:{color:0===t.detailData.forceChangeBeforeState?"blue":1===t.detailData.forceChangeBeforeState?"orange":2===t.detailData.forceChangeBeforeState?"#4BD884":6===t.detailData.forceChangeBeforeState?"":"#F03B44"}},[t._v(" "+t._s(0===t.detailData.forceChangeBeforeState?"订单生成":1===t.detailData.forceChangeBeforeState?"支付中":2===t.detailData.forceChangeBeforeState?"支付成功":3===t.detailData.forceChangeBeforeState?"支付失败":4===t.detailData.forceChangeBeforeState?"已撤销":5===t.detailData.forceChangeBeforeState?"测试冲正":6===t.detailData.forceChangeBeforeState?"订单关闭":"未知")+" ")])],1)],1)],1)],1),s("a-divider"),s("a-col",{attrs:{sm:24}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"渠道订单号"}},[s("b",[t._v(t._s(""==t.detailData.passageOrderNo?"无":t.detailData.passageOrderNo))])])],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"支付接口代码"}},[t._v(" "+t._s(t.detailData.ifCode)+" ")])],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"支付通道ID"}},[t._v(" "+t._s(t.detailData.passageId)+" ")])],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"客户端IP"}},[t._v(" "+t._s(t.detailData.clientIp)+" ")])],1)],1),s("a-col",{attrs:{sm:12}},[s("a-descriptions",[s("a-descriptions-item",{attrs:{label:"异步通知地址"}},[t._v(" "+t._s(t.detailData.notifyUrl)+" ")])],1)],1),s("a-divider"),s("a-row",{attrs:{justify:"start",type:"flex"}},[s("a-col",{attrs:{sm:24}},[s("a-form-model-item",{attrs:{label:"下单返回参数"}},[s("a-input",{staticStyle:{height:"100px",color:"black"},attrs:{type:"textarea",disabled:"disabled"},model:{value:t.detailData.passageResp,callback:function(a){t.$set(t.detailData,"passageResp",a)},expression:"detailData.passageResp"}})],1)],1)],1),s("a-row",{attrs:{justify:"start",type:"flex"}},[s("a-col",{attrs:{sm:24}},[s("a-form-model-item",{attrs:{label:"回调通知参数"}},[s("a-input",{staticStyle:{height:"100px",color:"black"},attrs:{type:"textarea",disabled:"disabled"},model:{value:t.detailData.notifyParams,callback:function(a){t.$set(t.detailData,"notifyParams",a)},expression:"detailData.notifyParams"}})],1)],1)],1)],1)]],2)},r=[],o=e("513d"),i=e("4f53"),c=e("f339"),l=e("5d5e"),n=e("0fea"),d=e("c1df"),p=e.n(d),m=[{key:"mchNo",title:"商户号",ellipsis:!0,width:200,fixed:"left",scopedSlots:{customRender:"mchSlot"}},{key:"amount",title:"支付金额",ellipsis:!0,width:100,fixed:"left",scopedSlots:{customRender:"amountSlot"}},{key:"orderNo",title:"订单号",scopedSlots:{customRender:"orderSlot"},width:300,fixed:"left"},{key:"beforeState",title:"补单前状态",scopedSlots:{customRender:"beforeStateSlot"},width:100},{key:"state",title:"支付状态",scopedSlots:{customRender:"stateSlot"},width:100},{key:"forceChangeState",title:"手动补单",scopedSlots:{customRender:"forceChangeStateSlot"},width:100},{key:"forceChangeName",title:"操作员",scopedSlots:{customRender:"forceChangeNameSlot"},width:100},{key:"notifyState",title:"回调状态",scopedSlots:{customRender:"notifySlot"},width:100},{key:"passageName",title:"通道",scopedSlots:{customRender:"passageSlot"},width:250},{key:"updatedAt",dataIndex:"updatedAt",title:"更新日期",width:200},{key:"op",title:"操作",width:100,fixed:"right",align:"center",scopedSlots:{customRender:"opSlot"}}],f={name:"OrderForceList",components:{JeepayTable:c["a"],JeepayTableColumns:l["a"],JeepayTextUp:i["a"],RefundModal:o["default"]},data:function(){return{btnLoading:!1,tableColumns:m,searchData:{forceChangeState:1,state:2},createdStart:"",createdEnd:"",visible:!1,detailData:{},productList:[],selectedRange:[],realTimeStatData:{totalAmount:0,totalIncome:0,successCount:0,totalCount:0,successAmount:0,totalMchIncome:0},ranges:{"今天":[p()().startOf("day"),p()().endOf("day")],"昨天":[p()().subtract(1,"day").startOf("day"),p()().subtract(1,"day").endOf("day")],"近一周":[p()().subtract(1,"week").startOf("day"),p()().endOf("day")]}}},computed:{},mounted:function(){this.selectedRange=[p()().startOf("day"),p()().endOf("day")],this.searchData.createdStart=this.selectedRange[0].format("YYYY-MM-DD HH:mm:ss"),this.searchData.createdEnd=this.selectedRange[1].format("YYYY-MM-DD HH:mm:ss"),this.searchData.forceChangeState=1,this.searchData.state=2,this.queryFunc(),this.$message.info("此页订单时间查询以订单更新日期为准，请知悉")},methods:{queryFunc:function(){this.searchData.forceChangeState=1,this.searchData.state=2,this.btnLoading=!0,this.getStatData(),this.$refs.infoTable.refTable(!0)},reqTableDataFunc:function(t){return n["cb"].list(n["E"],t)},searchFunc:function(){this.$refs.infoTable.refTable(!1)},detailFunc:function(t){var a=this;n["cb"].getById(n["F"],t).then((function(t){a.detailData=t})),this.visible=!0},forceChangeFunc:function(t){var a=this;console.log(t+"forceChangeFunc");var e=this;n["cb"].getNormal(n["Q"],t+"/forcePayOrderSuccess").then((function(t){e.$message.success("补单成功"),a.$refs.infoTable.refTable(!1)}))},moment:p.a,onChange:function(t,a){this.searchData.createdStart=a[0],this.searchData.createdEnd=a[1]},disabledDate:function(t){return t&&t>p()().endOf("day")},onClose:function(){this.visible=!1},changeStr2ellipsis:function(t,a){var e=parseInt(a/2);return t.substring(0,e-1)+"..."+t.substring(t.length-e,t.length)},resetSearch:function(){this.searchData={forceChangeState:1},this.selectedRange=[]},getStatData:function(){var t=this;t.statLoading=!0,n["cb"].postDataNormal("/api/payRealTimeStatOrder","countRealForceOrder",this.searchData).then((function(a){t.realTimeStatData=a,t.statLoading=!1}))}}},u=f,h=(e("fdd5"),e("2877")),g=Object(h["a"])(u,s,r,!1,null,"4ce21fb4",null);a["default"]=g.exports},fdd5:function(t,a,e){"use strict";e("9c3e")}}]);